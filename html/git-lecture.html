<!-- ì›ë³¸: git-lecture.jsx | ë³€í™˜: 2026-02-23 -->
<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Git ê°•ì˜ ì‹œë®¬ë ˆì´í„°</title>
<style>
  html, body, #root { min-height: 100vh; margin: 0; }
  body { background: #0a0e1a; overflow-x: hidden; }
  ::-webkit-scrollbar { width: 5px; height: 5px; }
  ::-webkit-scrollbar-track { background: transparent; }
  ::-webkit-scrollbar-thumb { background: #1e2d45; border-radius: 3px; }
</style>
<script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
<div id="root"></div>
<script type="text/babel">
const { useState, useEffect, useRef, useCallback } = React;


const css = `
  @import url('https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=Syne:wght@400;600;700;800&family=DM+Mono:wght@400;500&display=swap');
  * { margin:0; padding:0; box-sizing:border-box; }
  :root {
    --bg:#0a0e1a; --surface:#111827; --surface2:#1a2236; --border:#1e2d45;
    --accent:#00d4ff; --accent2:#7c3aed; --accent3:#f59e0b; --accent4:#10b981;
    --text:#e2e8f0; --text-muted:#64748b; --danger:#ef4444; --green:#22c55e; --orange:#f97316;
  }
  @keyframes fadeInUp { from{opacity:0;transform:translateY(40px)} to{opacity:1;transform:translateY(0)} }
  @keyframes fadeInLeft { from{opacity:0;transform:translateX(-40px)} to{opacity:1;transform:translateX(0)} }
  @keyframes fadeInRight { from{opacity:0;transform:translateX(40px)} to{opacity:1;transform:translateX(0)} }
  @keyframes zoomIn { from{opacity:0;transform:scale(0.85)} to{opacity:1;transform:scale(1)} }
  @keyframes pulse { 0%,100%{box-shadow:0 0 0 0 rgba(0,212,255,0.4)} 50%{box-shadow:0 0 0 10px rgba(0,212,255,0)} }
  @keyframes glow { 0%,100%{text-shadow:0 0 10px #00d4ff,0 0 20px #00d4ff} 50%{text-shadow:0 0 20px #00d4ff,0 0 40px #00d4ff,0 0 60px #7c3aed} }
  @keyframes float { 0%,100%{transform:translateY(0)} 50%{transform:translateY(-10px)} }
  @keyframes bounce { 0%,100%{transform:translateY(0)} 30%{transform:translateY(-18px)} 55%{transform:translateY(-8px)} 75%{transform:translateY(-13px)} }
  @keyframes blink { 0%,100%{opacity:1} 50%{opacity:0} }
  @keyframes slideDown { from{opacity:0;max-height:0;transform:translateY(-10px)} to{opacity:1;max-height:3000px;transform:translateY(0)} }
  @keyframes shake { 0%,100%{transform:translateX(0)} 20%{transform:translateX(-6px)} 40%{transform:translateX(6px)} 60%{transform:translateX(-4px)} 80%{transform:translateX(4px)} }
  @keyframes flip { from{transform:rotateY(90deg);opacity:0} to{transform:rotateY(0deg);opacity:1} }
  @keyframes staggerReveal { from{opacity:0;transform:translateY(16px) scale(0.96)} to{opacity:1;transform:translateY(0) scale(1)} }
  @keyframes scanline { 0%{top:-5%} 100%{top:105%} }
  @keyframes gridMove { 0%{transform:translateY(0)} 100%{transform:translateY(40px)} }
  @keyframes orbFloat { 0%{transform:translate(0,0) scale(1)} 33%{transform:translate(30px,-30px) scale(1.1)} 66%{transform:translate(-20px,20px) scale(0.9)} 100%{transform:translate(0,0) scale(1)} }
  @keyframes progressFill { from{width:0%} to{width:var(--target)} }
  @keyframes commitAppear { from{opacity:0;transform:scale(0) rotate(-180deg)} to{opacity:1;transform:scale(1) rotate(0deg)} }
  @keyframes lineGrow { from{width:0} to{width:100%} }
  @keyframes branchSlide { from{opacity:0;transform:translateY(-20px) translateX(-10px)} to{opacity:1;transform:translateY(0) translateX(0)} }
  @keyframes conflictFlash { 0%,100%{background:rgba(239,68,68,0.1)} 50%{background:rgba(239,68,68,0.25)} }
  @keyframes successPop { 0%{transform:scale(0)} 60%{transform:scale(1.15)} 100%{transform:scale(1)} }
  @keyframes typeChar { from{opacity:0;transform:translateY(4px)} to{opacity:1;transform:translateY(0)} }
  @keyframes ripple { from{transform:scale(0);opacity:1} to{transform:scale(3);opacity:0} }
  @keyframes prBadge { from{opacity:0;transform:translateY(-10px) scale(0.8)} to{opacity:1;transform:translateY(0) scale(1)} }
  @keyframes mergeAnim { from{stroke-dashoffset:200} to{stroke-dashoffset:0} }

  .sim-btn {
    background:linear-gradient(135deg,var(--accent),var(--accent2));
    border:none; color:white; padding:8px 20px; border-radius:8px;
    font-family:'DM Mono',monospace; font-size:12px; cursor:pointer;
    transition:transform 0.2s,box-shadow 0.2s;
    box-shadow:0 4px 16px rgba(0,212,255,0.25);
  }
  .sim-btn:hover { transform:translateY(-2px) scale(1.03); box-shadow:0 8px 24px rgba(0,212,255,0.35); }
  .sim-btn:active { transform:scale(0.97); }
  .sim-btn:disabled { background:var(--border); color:var(--text-muted); cursor:default; transform:none; box-shadow:none; }
  .ghost-btn {
    background:transparent; border:1px solid var(--border); color:var(--text-muted);
    padding:8px 18px; border-radius:8px; font-family:'DM Mono',monospace;
    font-size:12px; cursor:pointer; transition:all 0.2s;
  }
  .ghost-btn:hover { border-color:var(--accent); color:var(--accent); }

  .sim-grid { display:grid; grid-template-columns:1fr 300px; min-height:340px; }
  .sim-grid-eq { display:grid; grid-template-columns:1fr 1fr; }
  .sim-grid-narrow { display:grid; grid-template-columns:1fr 280px; }
  @media (max-width:780px) {
    .sim-grid, .sim-grid-eq, .sim-grid-narrow { grid-template-columns:1fr; }
    .sim-grid { min-height:auto; }
  }
`;

/* â”€â”€â”€ helpers â”€â”€â”€ */
function useReveal(threshold = 0.12) {
  const ref = useRef(null);
  const [v, setV] = useState(false);
  useEffect(() => {
    const ob = new IntersectionObserver(([e]) => { if (e.isIntersecting) { setV(true); ob.disconnect(); } }, { threshold });
    if (ref.current) ob.observe(ref.current);
    return () => ob.disconnect();
  }, []);
  return [ref, v];
}
function Reveal({ children, delay = 0, style = {} }) {
  const [ref, v] = useReveal();
  return (
    <div ref={ref} style={{ opacity: v ? 1 : 0, transform: v ? "translateY(0)" : "translateY(36px)", transition: `opacity .65s ease ${delay}s, transform .65s cubic-bezier(.34,1.2,.64,1) ${delay}s`, ...style }}>
      {children}
    </div>
  );
}

function Typewriter({ texts, speed = 75 }) {
  const [d, setD] = useState(""); const [ti, setTi] = useState(0); const [ci, setCi] = useState(0); const [del, setDel] = useState(false);
  useEffect(() => {
    const cur = texts[ti];
    const t = setTimeout(() => {
      if (!del) { if (ci < cur.length) { setD(cur.slice(0, ci + 1)); setCi(c => c + 1); } else setTimeout(() => setDel(true), 1800); }
      else { if (ci > 0) { setD(cur.slice(0, ci - 1)); setCi(c => c - 1); } else { setDel(false); setTi(i => (i + 1) % texts.length); } }
    }, del ? speed / 2 : speed);
    return () => clearTimeout(t);
  }, [ci, del, ti, texts, speed]);
  return <span style={{ color: "var(--accent)" }}>{d}<span style={{ animation: "blink 1s infinite" }}>|</span></span>;
}

function CmdBadge({ cmd, desc, color = "var(--accent)" }) {
  const [h, setH] = useState(false);
  return (
    <div onMouseEnter={() => setH(true)} onMouseLeave={() => setH(false)}
      style={{ display: "flex", gap: 12, alignItems: "flex-start", padding: "10px 14px", background: h ? `${color}08` : "transparent", borderLeft: `3px solid ${h ? color : "transparent"}`, borderRadius: "0 8px 8px 0", transition: "all .3s cubic-bezier(.34,1.56,.64,1)", transform: h ? "translateX(5px)" : "translateX(0)", cursor: "default" }}>
      <code style={{ background: "rgba(0,0,0,0.45)", color, padding: "3px 10px", borderRadius: 5, fontFamily: "DM Mono,monospace", fontSize: 12, border: `1px solid ${color}28`, whiteSpace: "nowrap", flexShrink: 0, boxShadow: h ? `0 0 12px ${color}40` : "none", transition: "box-shadow .3s" }}>{cmd}</code>
      <span style={{ color: "var(--text-muted)", fontSize: 13, lineHeight: 1.6 }}>{desc}</span>
    </div>
  );
}

function ModuleCard({ module, index, color, icon, children }) {
  const [open, setOpen] = useState(false);
  const [ref, v] = useReveal();
  const pal = { green: "#22c55e", yellow: "#f59e0b", orange: "#f97316", blue: "#00d4ff", red: "#ef4444", purple: "#7c3aed" };
  const c = pal[color] || pal.blue;
  return (
    <div ref={ref} style={{ opacity: v ? 1 : 0, transform: v ? "none" : "translateY(40px) scale(.96)", transition: `all .55s cubic-bezier(.34,1.2,.64,1) ${index * 0.1}s` }}>
      <div onClick={() => setOpen(o => !o)} style={{ background: "var(--surface)", border: `1px solid ${open ? c + "55" : "var(--border)"}`, borderRadius: 14, overflow: "hidden", cursor: "pointer", boxShadow: open ? `0 0 28px ${c}22, 0 8px 28px rgba(0,0,0,.3)` : "0 4px 18px rgba(0,0,0,.2)", transition: "all .35s cubic-bezier(.34,1.2,.64,1)" }}>
        <div style={{ display: "flex", alignItems: "center", gap: 14, padding: "18px 22px", background: open ? `${c}0e` : "transparent", borderBottom: open ? `1px solid ${c}22` : "1px solid transparent", transition: "all .3s" }}>
          <div style={{ width: 46, height: 46, borderRadius: 11, background: `${c}18`, border: `2px solid ${c}45`, display: "flex", alignItems: "center", justifyContent: "center", fontSize: 20, boxShadow: open ? `0 0 18px ${c}45` : "none", transition: "all .3s", animation: open ? "pulse 2s infinite" : "none" }}>{icon}</div>
          <div style={{ flex: 1 }}>
            <div style={{ fontSize: 10, color: c, fontFamily: "DM Mono,monospace", letterSpacing: 2, marginBottom: 3 }}>MODULE {String(index + 1).padStart(2, "0")}</div>
            <div style={{ fontSize: 16, fontFamily: "Syne,sans-serif", fontWeight: 700, color: "var(--text)" }}>{module}</div>
          </div>
          <div style={{ color: c, fontSize: 20, transform: open ? "rotate(180deg)" : "none", transition: "transform .35s cubic-bezier(.34,1.56,.64,1)" }}>â–¾</div>
        </div>
        {open && <div style={{ padding: 22, animation: "slideDown .35s ease" }}>{children}</div>}
      </div>
    </div>
  );
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SIMULATION 1 â€” BRANCH & MERGE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function BranchMergeSim() {
  const INIT = {
    commits: [
      { id: "a1b2c3d", msg: "Initial commit", branch: "main", author: "you", ts: "10:00", x: 80, y: 90, parent: null },
      { id: "e4f5g6h", msg: "Add README.md", branch: "main", author: "you", ts: "10:15", x: 200, y: 90, parent: "a1b2c3d" },
    ],
    branches: { main: "e4f5g6h" },
    head: "main",
    log: [
      { type: "cmd", text: "git init" },
      { type: "out", text: "Initialized empty Git repository in ~/project/.git/" },
      { type: "cmd", text: "git commit -m 'Initial commit'" },
      { type: "out", text: "[main (root-commit) a1b2c3d] Initial commit" },
      { type: "cmd", text: "git commit -m 'Add README.md'" },
      { type: "out", text: "[main e4f5g6h] Add README.md" },
    ],
    step: 0,
    merged: false,
    cleaned: false,
  };

  const [state, setState] = useState(INIT);
  const [hoveredCommit, setHoveredCommit] = useState(null);
  const logEndRef = useRef(null);

  useEffect(() => {
    if (logEndRef.current) logEndRef.current.scrollIntoView({ behavior: "smooth" });
  }, [state.log.length]);

  const STEP_INFO = [
    { title: "feature ë¸Œëœì¹˜ ìƒì„±", desc: "mainì—ì„œ ìƒˆ ë¸Œëœì¹˜ë¥¼ ë§Œë“­ë‹ˆë‹¤. ë‘ ë¸Œëœì¹˜ê°€ ê°™ì€ ì»¤ë°‹ì„ ê°€ë¦¬í‚µë‹ˆë‹¤.", concept: "ë¸Œëœì¹˜ = íŠ¹ì • ì»¤ë°‹ì„ ê°€ë¦¬í‚¤ëŠ” í¬ì¸í„°. ìƒì„± ë¹„ìš©ì´ ê±°ì˜ ì—†ìŠµë‹ˆë‹¤.", icon: "ğŸŒ¿" },
    { title: "featureì—ì„œ ì²« ì»¤ë°‹", desc: "ë¡œê·¸ì¸ í¼ì„ êµ¬í˜„í•©ë‹ˆë‹¤. feature/loginë§Œ ì „ì§„í•˜ê³  mainì€ ê·¸ëŒ€ë¡œì…ë‹ˆë‹¤.", concept: "ê° ë¸Œëœì¹˜ì˜ ì‘ì—…ì€ ì„œë¡œ ë…ë¦½ì ì…ë‹ˆë‹¤.", icon: "âœï¸" },
    { title: "featureì—ì„œ ë‘ ë²ˆì§¸ ì»¤ë°‹", desc: "ì…ë ¥ ê²€ì¦ ë¡œì§ì„ ì¶”ê°€í•©ë‹ˆë‹¤. feature/loginì´ mainë³´ë‹¤ 2ì»¤ë°‹ ì•ì„œê²Œ ë©ë‹ˆë‹¤.", concept: "ì»¤ë°‹ì´ ìŒ“ì´ë©´ì„œ featureë§Œì˜ íˆìŠ¤í† ë¦¬ê°€ ë§Œë“¤ì–´ì§‘ë‹ˆë‹¤.", icon: "âœï¸" },
    { title: "main ë¸Œëœì¹˜ë¡œ ì „í™˜", desc: "HEADê°€ mainìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤. Working Directoryê°€ main ìƒíƒœë¡œ ë³µì›ë©ë‹ˆë‹¤.", concept: "git switchëŠ” HEADë¥¼ ì´ë™ì‹œí‚¤ê³  íŒŒì¼ì„ í•´ë‹¹ ë¸Œëœì¹˜ ìƒíƒœë¡œ ë³µì›í•©ë‹ˆë‹¤.", icon: "ğŸ”„" },
    { title: "mainì—ì„œë„ ì»¤ë°‹ ë°œìƒ", desc: "mainì—ì„œë„ ë…ë¦½ì ìœ¼ë¡œ ì‘ì—…í•©ë‹ˆë‹¤. ì´ì œ ë‘ ë¸Œëœì¹˜ê°€ ê°ˆë¼ì¡ŒìŠµë‹ˆë‹¤(diverge).", concept: "ê³µí†µ ì¡°ìƒ(e4f5g6h) ì´í›„ ê°ì ë‹¤ë¥¸ ì»¤ë°‹ì´ ìƒê²¼ìŠµë‹ˆë‹¤.", icon: "âœï¸" },
    { title: "feature â†’ main ë³‘í•©", desc: "3-way mergeë¡œ ë‘ ë¸Œëœì¹˜ë¥¼ í•©ì¹©ë‹ˆë‹¤. ë¶€ëª¨ê°€ 2ê°œì¸ Merge ì»¤ë°‹ì´ ìƒì„±ë©ë‹ˆë‹¤.", concept: "Merge ì»¤ë°‹ = ì–‘ìª½ ë³€ê²½ì‚¬í•­ì„ ëª¨ë‘ í¬í•¨í•˜ëŠ” íŠ¹ìˆ˜ ì»¤ë°‹.", icon: "ğŸ”€" },
    { title: "ë³‘í•©ëœ ë¸Œëœì¹˜ ì •ë¦¬", desc: "feature/login ì‘ì—…ì´ mainì— í¬í•¨ë˜ì—ˆìœ¼ë¯€ë¡œ ë¸Œëœì¹˜ë¥¼ ì‚­ì œí•©ë‹ˆë‹¤.", concept: "ë¸Œëœì¹˜ ì‚­ì œëŠ” í¬ì¸í„°ë§Œ ì œê±°í•©ë‹ˆë‹¤. ì»¤ë°‹ì€ ê·¸ëŒ€ë¡œ ë‚¨ìŠµë‹ˆë‹¤.", icon: "ğŸ—‘ï¸" },
  ];

  const steps = [
    {
      label: "git switch -c feature/login", color: "#00d4ff",
      action: (s) => ({ ...s, branches: { ...s.branches, "feature/login": "e4f5g6h" }, head: "feature/login",
        log: [...s.log, { type: "cmd", text: "git switch -c feature/login" }, { type: "out", text: "Switched to a new branch 'feature/login'" }], step: 1 })
    },
    {
      label: "git commit -m 'Add login form'", color: "#00d4ff",
      action: (s) => {
        const nc = { id: "f1a2b3c", msg: "Add login form", branch: "feature/login", author: "you", ts: "11:00", x: 320, y: 190, parent: "e4f5g6h" };
        return { ...s, commits: [...s.commits, nc], branches: { ...s.branches, "feature/login": "f1a2b3c" },
          log: [...s.log, { type: "cmd", text: "git add src/Login.jsx" }, { type: "cmd", text: "git commit -m 'Add login form'" },
            { type: "out", text: "[feature/login f1a2b3c] Add login form" }, { type: "stat", text: " 1 file changed, 42 insertions(+)" }], step: 2 };
      }
    },
    {
      label: "git commit -m 'Add validation'", color: "#00d4ff",
      action: (s) => {
        const nc = { id: "d4e5f6g", msg: "Add input validation", branch: "feature/login", author: "you", ts: "11:30", x: 440, y: 190, parent: "f1a2b3c" };
        return { ...s, commits: [...s.commits, nc], branches: { ...s.branches, "feature/login": "d4e5f6g" },
          log: [...s.log, { type: "cmd", text: "git commit -m 'Add input validation'" },
            { type: "out", text: "[feature/login d4e5f6g] Add input validation" }, { type: "stat", text: " 2 files changed, 28 insertions(+), 3 deletions(-)" }], step: 3 };
      }
    },
    {
      label: "git switch main", color: "#22c55e",
      action: (s) => ({ ...s, head: "main",
        log: [...s.log, { type: "cmd", text: "git switch main" }, { type: "out", text: "Switched to branch 'main'" }], step: 4 })
    },
    {
      label: "git commit -m 'Update styles'", color: "#22c55e",
      action: (s) => {
        const nc = { id: "h7i8j9k", msg: "Update global styles", branch: "main", author: "you", ts: "12:00", x: 320, y: 90, parent: "e4f5g6h" };
        return { ...s, commits: [...s.commits, nc], branches: { ...s.branches, main: "h7i8j9k" },
          log: [...s.log, { type: "cmd", text: "git commit -m 'Update global styles'" },
            { type: "out", text: "[main h7i8j9k] Update global styles" }, { type: "stat", text: " 1 file changed, 15 insertions(+), 8 deletions(-)" }], step: 5 };
      }
    },
    {
      label: "git merge feature/login", color: "#f59e0b",
      action: (s) => {
        const nc = { id: "m9g8e7r", msg: "Merge branch 'feature/login' into main", branch: "main", author: "you", ts: "12:15", x: 560, y: 90, parent: "h7i8j9k", parent2: "d4e5f6g", isMerge: true };
        return { ...s, commits: [...s.commits, nc], branches: { ...s.branches, main: "m9g8e7r" }, head: "main", merged: true,
          log: [...s.log, { type: "cmd", text: "git merge feature/login" }, { type: "out", text: "Merge made by the 'ort' strategy." },
            { type: "stat", text: " src/Login.jsx  | 42 +++++++++++++++" }, { type: "stat", text: " src/validate.js | 28 ++++++++++--" },
            { type: "out", text: " 2 files changed, 67 insertions(+), 3 deletions(-)" }], step: 6 };
      }
    },
    {
      label: "git branch -d feature/login", color: "#7c3aed",
      action: (s) => {
        const nb = { ...s.branches }; delete nb["feature/login"];
        return { ...s, branches: nb, cleaned: true,
          log: [...s.log, { type: "cmd", text: "git branch -d feature/login" }, { type: "out", text: "Deleted branch feature/login (was d4e5f6g)." },
            { type: "blank", text: "" }, { type: "cmd", text: "git log --oneline --graph" },
            { type: "graph", text: "*   m9g8e7r (HEAD -> main) Merge branch 'feature/login'" },
            { type: "graph", text: "|\\  " }, { type: "graph", text: "| * d4e5f6g Add input validation" },
            { type: "graph", text: "| * f1a2b3c Add login form" }, { type: "graph", text: "* | h7i8j9k Update global styles" },
            { type: "graph", text: "|/  " }, { type: "graph", text: "* e4f5g6h Add README.md" },
            { type: "graph", text: "* a1b2c3d Initial commit" }], step: 7 };
      }
    },
  ];

  const canStep = state.step < steps.length;
  const doStep = () => { if (canStep) setState(s => steps[s.step].action(s)); };
  const reset = () => { setState(INIT); setHoveredCommit(null); };

  const branchColor = { main: "#22c55e", "feature/login": "#00d4ff" };
  const commitColor = (c) => c.isMerge ? "#f59e0b" : branchColor[c.branch] || "#64748b";

  /* Bezier curve edges */
  const edges = [];
  state.commits.forEach(c => {
    if (c.parent) {
      const p = state.commits.find(x => x.id === c.parent);
      if (p) edges.push({ x1: p.x, y1: p.y, x2: c.x, y2: c.y, color: commitColor(c), id: c.id + "-" + c.parent, curve: p.y !== c.y });
    }
    if (c.parent2) {
      const p2 = state.commits.find(x => x.id === c.parent2);
      if (p2) edges.push({ x1: p2.x, y1: p2.y, x2: c.x, y2: c.y, color: "#f59e0b", id: c.id + "-" + c.parent2, dashed: true, curve: true });
    }
  });
  const edgePath = (e) => {
    if (!e.curve) return `M${e.x1},${e.y1} L${e.x2},${e.y2}`;
    const mx = (e.x1 + e.x2) / 2;
    return `M${e.x1},${e.y1} C${mx},${e.y1} ${mx},${e.y2} ${e.x2},${e.y2}`;
  };

  const curInfo = state.step > 0 ? STEP_INFO[state.step - 1] : null;

  return (
    <div style={{ background: "var(--surface2)", borderRadius: 14, overflow: "hidden", border: "1px solid var(--border)" }}>
      {/* Header */}
      <div style={{ padding: "14px 18px", borderBottom: "1px solid var(--border)", display: "flex", alignItems: "center", justifyContent: "space-between", flexWrap: "wrap", gap: 10 }}>
        <div style={{ display: "flex", alignItems: "center", gap: 10 }}>
          <div style={{ fontFamily: "DM Mono,monospace", fontSize: 13, color: "var(--accent)" }}>ğŸŒ¿ Branch & Merge ì‹œë®¬ë ˆì´í„°</div>
          <span style={{ fontSize: 10, color: "var(--text-muted)", fontFamily: "DM Mono,monospace" }}>Step {state.step}/{steps.length}</span>
        </div>
        <div style={{ display: "flex", gap: 8, alignItems: "center", flexWrap: "wrap" }}>
          {Object.entries(state.branches).map(([name, tip]) => {
            const bc = branchColor[name] || "#64748b"; const isHead = state.head === name;
            return (
              <div key={name} style={{ padding: "4px 12px", borderRadius: 6, background: isHead ? `${bc}20` : `${bc}0c`, color: bc,
                border: `1px solid ${isHead ? bc + "60" : bc + "30"}`, fontSize: 11, fontFamily: "DM Mono,monospace",
                display: "flex", alignItems: "center", gap: 6, transition: "all .4s cubic-bezier(.34,1.56,.64,1)",
                boxShadow: isHead ? `0 0 10px ${bc}30` : "none" }}>
                {isHead && <span style={{ width: 6, height: 6, borderRadius: "50%", background: bc, animation: "pulse 2s infinite" }} />}
                {isHead && <span style={{ fontSize: 9, color: "#a78bfa" }}>HEAD â†’</span>}
                {name}
                <span style={{ fontSize: 9, color: "var(--text-muted)" }}>@{tip.slice(0, 7)}</span>
              </div>
            );
          })}
        </div>
      </div>

      {/* Step explanation banner */}
      {curInfo && (
        <div style={{ padding: "12px 18px", background: `${steps[state.step - 1]?.color || "var(--accent)"}08`,
          borderBottom: `1px solid ${steps[state.step - 1]?.color || "var(--accent)"}20`, animation: "slideDown .3s ease",
          display: "flex", gap: 12, alignItems: "flex-start" }}>
          <span style={{ fontSize: 20, flexShrink: 0, marginTop: 2 }}>{curInfo.icon}</span>
          <div style={{ flex: 1 }}>
            <div style={{ fontFamily: "Syne,sans-serif", fontWeight: 700, fontSize: 13, color: "var(--text)", marginBottom: 3 }}>Step {state.step}: {curInfo.title}</div>
            <div style={{ fontSize: 12, color: "var(--text-muted)", lineHeight: 1.6, marginBottom: 5 }}>{curInfo.desc}</div>
            <div style={{ fontSize: 11, color: steps[state.step - 1]?.color || "var(--accent)", fontFamily: "DM Mono,monospace",
              padding: "4px 10px", background: `${steps[state.step - 1]?.color || "var(--accent)"}0e`, borderRadius: 5,
              display: "inline-block", border: `1px solid ${steps[state.step - 1]?.color || "var(--accent)"}25` }}>
              ğŸ’¡ {curInfo.concept}
            </div>
          </div>
        </div>
      )}

      <div className="sim-grid">
        {/* Graph Canvas */}
        <div style={{ padding: 20, borderRight: "1px solid var(--border)", position: "relative" }}>
          <svg viewBox="0 0 640 280" style={{ display: "block", width: "100%", height: "auto" }}>
            <defs>
              <pattern id="bm-dots" width="20" height="20" patternUnits="userSpaceOnUse">
                <circle cx="10" cy="10" r="0.7" fill="rgba(100,116,139,0.12)" />
              </pattern>
              <marker id="bm-arr" markerWidth="8" markerHeight="8" refX="4" refY="4" orient="auto"><path d="M1,1 L1,7 L7,4 z" fill="#7c3aed" /></marker>
            </defs>
            <rect width="100%" height="100%" fill="url(#bm-dots)" />

            {/* Branch lane backgrounds */}
            <rect x="0" y="65" width="640" height="50" rx="4" fill="rgba(34,197,94,0.03)" />
            {state.step >= 1 && state.branches["feature/login"] && <rect x="0" y="165" width="640" height="50" rx="4" fill="rgba(0,212,255,0.03)" style={{ animation: "fadeInUp .3s ease" }} />}

            {/* Branch lane labels */}
            <g><rect x="4" y="78" width="42" height="18" rx="3" fill="rgba(34,197,94,0.1)" stroke="rgba(34,197,94,0.25)" strokeWidth="0.5" />
              <text x="25" y="91" textAnchor="middle" fill="#22c55e" fontSize="9" fontFamily="DM Mono,monospace">main</text></g>
            {state.step >= 1 && state.branches["feature/login"] && (
              <g style={{ animation: "fadeInLeft .3s ease" }}><rect x="4" y="178" width="72" height="18" rx="3" fill="rgba(0,212,255,0.1)" stroke="rgba(0,212,255,0.25)" strokeWidth="0.5" />
                <text x="40" y="191" textAnchor="middle" fill="#00d4ff" fontSize="8" fontFamily="DM Mono,monospace">feature/login</text></g>
            )}

            {/* Edges (bezier curves) */}
            {edges.map(e => (
              <path key={e.id} d={edgePath(e)} fill="none" stroke={e.color} strokeWidth="2.5" strokeOpacity=".65"
                strokeDasharray={e.dashed ? "6,4" : "none"} strokeLinecap="round" style={{ animation: "fadeInUp .4s ease" }} />
            ))}

            {/* Commits */}
            {state.commits.map((c) => {
              const color = commitColor(c); const isH = hoveredCommit === c.id;
              const isTip = Object.values(state.branches).includes(c.id);
              return (
                <g key={c.id} onMouseEnter={() => setHoveredCommit(c.id)} onMouseLeave={() => setHoveredCommit(null)} style={{ cursor: "pointer" }}>
                  {(isH || isTip) && <circle cx={c.x} cy={c.y} r={c.isMerge ? 20 : 17} fill="none" stroke={color} strokeWidth="1"
                    strokeOpacity={isH ? ".4" : ".15"} style={{ animation: isH ? "pulse 1.5s infinite" : "none" }} />}
                  <circle cx={c.x} cy={c.y} r={c.isMerge ? 14 : 11} fill={isH ? `${color}44` : `${color}18`}
                    stroke={color} strokeWidth={c.isMerge ? 3 : 2}
                    style={{ animation: "commitAppear .4s cubic-bezier(.34,1.56,.64,1) both",
                      filter: c.isMerge || isH ? `drop-shadow(0 0 ${isH ? 12 : 8}px ${color})` : "none", transition: "fill .2s, filter .2s" }} />
                  {c.isMerge && <text x={c.x} y={c.y + 4} textAnchor="middle" fill={color} fontSize="11" fontWeight="bold">M</text>}
                  <text x={c.x} y={c.y + (c.isMerge ? 30 : 26)} textAnchor="middle" fill={isH ? color : "#64748b"} fontSize="9"
                    fontFamily="DM Mono,monospace" style={{ transition: "fill .2s" }}>{c.id.slice(0, 7)}</text>
                  {isH && (
                    <foreignObject x={c.x - 85} y={c.y + 34} width="170" height="56">
                      <div style={{ background: "rgba(17,24,39,0.95)", border: `1px solid ${color}50`, borderRadius: 7,
                        padding: "6px 10px", textAlign: "center", animation: "fadeInUp .2s ease", backdropFilter: "blur(4px)" }}>
                        <div style={{ fontSize: 10, color, fontFamily: "DM Mono,monospace", marginBottom: 2 }}>{c.branch} Â· {c.ts}</div>
                        <div style={{ fontSize: 11, color: "#e2e8f0", fontFamily: "Syne,sans-serif" }}>{c.msg}</div>
                      </div>
                    </foreignObject>
                  )}
                </g>
              );
            })}

            {/* HEAD pointer */}
            {(() => {
              const tip = state.branches[state.head]; const c = state.commits.find(x => x.id === tip);
              if (!c) return null;
              return (
                <g>
                  <rect x={c.x - 24} y={c.y - 40} width={48} height={18} rx={4} fill="rgba(124,58,237,0.15)" stroke="rgba(124,58,237,0.5)" strokeWidth={1} />
                  <text x={c.x} y={c.y - 27} textAnchor="middle" fill="#a78bfa" fontSize="10" fontFamily="DM Mono,monospace" fontWeight="bold">HEAD</text>
                  <line x1={c.x} y1={c.y - 22} x2={c.x} y2={c.y - 13} stroke="#7c3aed" strokeWidth="2" strokeLinecap="round" markerEnd="url(#bm-arr)" />
                </g>
              );
            })()}
          </svg>

          {/* Step buttons */}
          <div style={{ display: "flex", gap: 8, flexWrap: "wrap", marginTop: 14, alignItems: "center" }}>
            <button className="sim-btn" onClick={doStep} disabled={!canStep}
              style={canStep && state.step === 0 ? { animation: "pulse 2s infinite" } : {}}>
              {canStep ? `â–¶ ${steps[state.step].label}` : "âœ“ ëª¨ë“  ë‹¨ê³„ ì™„ë£Œ"}
            </button>
            <button className="ghost-btn" onClick={reset}>â†º ì´ˆê¸°í™”</button>
            {state.step > 0 && <span style={{ fontSize: 10, color: "var(--text-muted)", fontFamily: "DM Mono,monospace" }}>{state.step}/{steps.length} ë‹¨ê³„</span>}
          </div>

          {/* Step progress with labels */}
          <div style={{ marginTop: 14 }}>
            <div style={{ display: "flex", gap: 3 }}>
              {steps.map((s, i) => (
                <div key={i} style={{ flex: 1, height: 5, borderRadius: 3,
                  background: i < state.step ? s.color : i === state.step ? `${s.color}50` : "var(--border)",
                  transition: "all .4s ease", boxShadow: i < state.step ? `0 0 6px ${s.color}60` : "none" }}
                  title={STEP_INFO[i].title} />
              ))}
            </div>
            <div style={{ display: "flex", gap: 3, marginTop: 4 }}>
              {steps.map((s, i) => (
                <div key={i} style={{ flex: 1, fontSize: 8, textAlign: "center", color: i < state.step ? s.color : "var(--text-muted)",
                  fontFamily: "DM Mono,monospace", transition: "color .3s", opacity: i < state.step ? 1 : 0.5 }}>
                  {i < state.step ? "âœ“" : i + 1}
                </div>
              ))}
            </div>
          </div>
        </div>

        {/* Terminal Log */}
        <div style={{ background: "#0d1117", fontFamily: "DM Mono,monospace", fontSize: 11, padding: 0, overflowY: "auto", maxHeight: 400, display: "flex", flexDirection: "column" }}>
          <div style={{ padding: "8px 14px", borderBottom: "1px solid #1e2d45", display: "flex", alignItems: "center", gap: 6, flexShrink: 0 }}>
            <div style={{ width: 8, height: 8, borderRadius: "50%", background: "#ef4444" }} />
            <div style={{ width: 8, height: 8, borderRadius: "50%", background: "#f59e0b" }} />
            <div style={{ width: 8, height: 8, borderRadius: "50%", background: "#22c55e" }} />
            <span style={{ flex: 1, textAlign: "center", fontSize: 9, color: "#374151" }}>~/project</span>
          </div>
          <div style={{ padding: 14, flex: 1, overflowY: "auto" }}>
            {state.log.map((l, i) => (
              <div key={i} style={{ lineHeight: 1.8, animation: "fadeInLeft .2s ease",
                color: l.type === "cmd" ? "var(--accent)" : l.type === "out" ? "#22c55e" : l.type === "stat" ? "#f59e0b" : l.type === "graph" ? "#a78bfa" : "#64748b",
                paddingLeft: l.type === "stat" || l.type === "graph" ? 8 : 0 }}>
                {l.type === "cmd" && <><span style={{ color: "#7c3aed" }}>â¯ </span>{l.text}</>}
                {l.type === "out" && l.text}
                {l.type === "stat" && <span style={{ opacity: 0.7 }}>{l.text}</span>}
                {l.type === "graph" && <span>{l.text}</span>}
                {l.type === "blank" && <br />}
              </div>
            ))}
            <div ref={logEndRef} />
            {state.merged && !state.cleaned && (
              <div style={{ marginTop: 10, padding: "8px 10px", background: "rgba(34,197,94,0.1)", borderRadius: 6, border: "1px solid rgba(34,197,94,0.25)", color: "#22c55e", animation: "successPop .5s cubic-bezier(.34,1.56,.64,1)" }}>
                âœ“ Merge ì„±ê³µ! ë‹¤ìŒ: ë¸Œëœì¹˜ ì •ë¦¬
              </div>
            )}
            {state.cleaned && (
              <div style={{ marginTop: 10, padding: "10px 12px", background: "rgba(124,58,237,0.1)", borderRadius: 6, border: "1px solid rgba(124,58,237,0.25)", animation: "successPop .5s cubic-bezier(.34,1.56,.64,1)" }}>
                <div style={{ color: "#a78bfa", marginBottom: 4 }}>ğŸ‰ ì „ì²´ ì›Œí¬í”Œë¡œìš° ì™„ë£Œ!</div>
                <div style={{ color: "#64748b", fontSize: 10, lineHeight: 1.6 }}>ë¸Œëœì¹˜ ìƒì„± â†’ ì»¤ë°‹ â†’ ì „í™˜ â†’ ë³‘í•© â†’ ì •ë¦¬<br />ì‹¤ë¬´ì—ì„œ ê°€ì¥ í”í•œ Git ì›Œí¬í”Œë¡œìš°ì…ë‹ˆë‹¤.</div>
              </div>
            )}
          </div>
        </div>
      </div>
    </div>
  );
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SIMULATION 2 â€” MERGE CONFLICT RESOLVER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function ConflictSim() {
  const INIT_SECTIONS = [
    { id: "s1", line: 1, label: "import êµ¬ë¬¸",
      base: 'import React from "react";',
      ours: 'import React, { useState } from "react";',
      theirs: 'import React, { useEffect } from "react";',
      both: 'import React, { useState, useEffect } from "react";',
      resolved: null, choice: null },
    { id: "s2", line: 3, label: "ì»´í¬ë„ŒíŠ¸ ì„ ì–¸",
      base: "function App() {",
      ours: "function MyApp() {",
      theirs: "function Application() {",
      both: "function MyApp() {",
      resolved: null, choice: null },
    { id: "s3", line: 5, label: "ìƒíƒœ ë³€ìˆ˜",
      base: "  const data = [];",
      ours: "  const [count, setCount] = useState(0);",
      theirs: "  const [items, setItems] = useState([]);",
      both: "  const [count, setCount] = useState(0);\n  const [items, setItems] = useState([]);",
      resolved: null, choice: null },
    { id: "s4", line: 12, label: "ë°˜í™˜ê°’ JSX",
      base: '  return <div>Hello</div>;',
      ours: '  return <div className="app">Hello World</div>;',
      theirs: '  return <main>Hello World</main>;',
      both: '  return <main className="app">Hello World</main>;',
      resolved: null, choice: null },
  ];

  const [sections, setSections] = useState(INIT_SECTIONS);
  const [phase, setPhase] = useState("conflict"); // conflict | resolving | staging | done
  const [viewMode, setViewMode] = useState("split"); // split | markers
  const [editingId, setEditingId] = useState(null);
  const [editText, setEditText] = useState("");
  const [log, setLog] = useState([
    { type: "cmd", text: "git merge feature/new-component" },
    { type: "err", text: "Auto-merging src/App.jsx" },
    { type: "err", text: "CONFLICT (content): Merge conflict in src/App.jsx" },
    { type: "err", text: "Automatic merge failed; fix conflicts and then commit the result." },
  ]);
  const logEndRef = useRef(null);

  useEffect(() => { if (logEndRef.current) logEndRef.current.scrollIntoView({ behavior: "smooth" }); }, [log.length]);

  const resolvedCount = sections.filter(s => s.resolved !== null).length;
  const allResolved = resolvedCount === sections.length;

  // Auto-advance phase
  useEffect(() => {
    if (resolvedCount > 0 && phase === "conflict") setPhase("resolving");
  }, [resolvedCount, phase]);

  const choose = (id, choice) => {
    const sec = sections.find(s => s.id === id);
    const value = choice === "both" ? sec.both : sec[choice];
    setSections(prev => prev.map(s => s.id === id ? { ...s, resolved: value, choice } : s));
    const labels = { ours: "Accept Current Change", theirs: "Accept Incoming Change", both: "Accept Both Changes" };
    setLog(prev => [...prev, { type: "info", text: `  âœ“ [${sec.label}] ${labels[choice]}` }]);
  };

  const startEdit = (id) => {
    const sec = sections.find(s => s.id === id);
    setEditingId(id);
    setEditText(sec.ours);
  };

  const confirmEdit = (id) => {
    if (!editText.trim()) return;
    const sec = sections.find(s => s.id === id);
    setSections(prev => prev.map(s => s.id === id ? { ...s, resolved: editText, choice: "custom" } : s));
    setLog(prev => [...prev, { type: "info", text: `  âœ“ [${sec.label}] ì§ì ‘ í¸ì§‘ìœ¼ë¡œ í•´ê²°` }]);
    setEditingId(null); setEditText("");
  };

  const undoResolve = (id) => {
    const sec = sections.find(s => s.id === id);
    setSections(prev => prev.map(s => s.id === id ? { ...s, resolved: null, choice: null } : s));
    setLog(prev => [...prev, { type: "warn", text: `  â†© í•´ê²° ì·¨ì†Œ: ${sec.label}` }]);
    if (phase === "staging") setPhase("resolving");
  };

  const stageFile = () => {
    setPhase("staging");
    setLog(prev => [...prev, { type: "blank", text: "" },
      { type: "cmd", text: "git add src/App.jsx" },
      { type: "out", text: "ì¶©ëŒ í•´ê²° íŒŒì¼ì´ Staging Areaì— ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤." }]);
  };

  const commitResolve = () => {
    setPhase("done");
    setLog(prev => [...prev,
      { type: "cmd", text: "git commit -m 'Resolve merge conflict in App.jsx'" },
      { type: "out", text: "[main 7f8g9h0] Resolve merge conflict in App.jsx" },
      { type: "stat", text: " 1 file changed, 23 insertions(+), 5 deletions(-)" }]);
  };

  const reset = () => {
    setSections(INIT_SECTIONS); setPhase("conflict"); setViewMode("split");
    setEditingId(null); setEditText("");
    setLog([
      { type: "cmd", text: "git merge feature/new-component" },
      { type: "err", text: "Auto-merging src/App.jsx" },
      { type: "err", text: "CONFLICT (content): Merge conflict in src/App.jsx" },
      { type: "err", text: "Automatic merge failed; fix conflicts and then commit the result." },
    ]);
  };

  const PHASE_INFO = {
    conflict: { title: "ì¶©ëŒ ê°ì§€ë¨", desc: "git mergeê°€ ìë™ ë³‘í•©ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë™ì¼í•œ ë¶€ë¶„ì„ ì–‘ìª½ ë¸Œëœì¹˜ê°€ ë‹¤ë¥´ê²Œ ìˆ˜ì •í•˜ì—¬ ì¶©ëŒì´ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", icon: "âš ï¸", color: "#ef4444" },
    resolving: { title: "ì¶©ëŒ í•´ê²° ì¤‘", desc: "ê° ì„¹ì…˜ë§ˆë‹¤ Current(Ours), Incoming(Theirs), Both, ë˜ëŠ” ì§ì ‘ í¸ì§‘ ì¤‘ ì„ íƒí•˜ì„¸ìš”.", icon: "ğŸ”§", color: "#f59e0b" },
    staging: { title: "ìŠ¤í…Œì´ì§• ì™„ë£Œ", desc: "í•´ê²°ëœ íŒŒì¼ì´ Staging Areaì— ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤. commitìœ¼ë¡œ ë³‘í•©ì„ ì™„ë£Œí•˜ì„¸ìš”.", icon: "ğŸ“‹", color: "#00d4ff" },
    done: { title: "ë³‘í•© ì™„ë£Œ!", desc: "ëª¨ë“  ì¶©ëŒì´ í•´ê²°ë˜ê³  Merge ì»¤ë°‹ì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.", icon: "ğŸ‰", color: "#22c55e" },
  };
  const pi = PHASE_INFO[phase];

  const choiceLabels = { ours: "Current", theirs: "Incoming", both: "Both", custom: "í¸ì§‘ë¨" };
  const choiceColors = { ours: "#22c55e", theirs: "#00d4ff", both: "#f59e0b", custom: "#a78bfa" };

  return (
    <div style={{ background: "var(--surface2)", borderRadius: 14, overflow: "hidden", border: "1px solid var(--border)" }}>
      {/* Header */}
      <div style={{ padding: "14px 18px", borderBottom: "1px solid var(--border)", display: "flex", alignItems: "center", justifyContent: "space-between", flexWrap: "wrap", gap: 8 }}>
        <div style={{ display: "flex", alignItems: "center", gap: 10 }}>
          <span style={{ fontFamily: "DM Mono,monospace", fontSize: 13, color: "#ef4444" }}>âš”ï¸ Merge Conflict í•´ê²° ì‹œë®¬ë ˆì´í„°</span>
          <span style={{ fontSize: 10, color: pi.color, fontFamily: "DM Mono,monospace", padding: "2px 8px", background: `${pi.color}14`, borderRadius: 4, border: `1px solid ${pi.color}30` }}>
            {pi.icon} {pi.title}
          </span>
        </div>
        <div style={{ display: "flex", gap: 8, alignItems: "center" }}>
          <span style={{ fontSize: 11, fontFamily: "DM Mono,monospace", color: "var(--text-muted)" }}>
            {resolvedCount}/{sections.length} í•´ê²°
          </span>
          <div style={{ width: 90, height: 6, background: "var(--border)", borderRadius: 3, overflow: "hidden" }}>
            <div style={{ height: "100%", width: `${(resolvedCount / sections.length) * 100}%`, background: allResolved ? "#22c55e" : "linear-gradient(90deg,#ef4444,#f59e0b)", transition: "all .5s ease", borderRadius: 3 }} />
          </div>
        </div>
      </div>

      {/* Phase explanation banner */}
      <div style={{ padding: "10px 18px", background: `${pi.color}08`, borderBottom: `1px solid ${pi.color}18`,
        display: "flex", gap: 10, alignItems: "center", animation: "slideDown .3s ease" }}>
        <span style={{ fontSize: 18 }}>{pi.icon}</span>
        <div>
          <span style={{ fontFamily: "Syne,sans-serif", fontWeight: 700, fontSize: 12, color: pi.color }}>{pi.title}</span>
          <span style={{ fontSize: 11, color: "var(--text-muted)", marginLeft: 10 }}>{pi.desc}</span>
        </div>
      </div>

      <div className="sim-grid-narrow">
        {/* Editor Area */}
        <div style={{ borderRight: "1px solid var(--border)", display: "flex", flexDirection: "column" }}>
          {/* File tab + view toggle */}
          <div style={{ padding: "8px 16px", borderBottom: "1px solid var(--border)", display: "flex", alignItems: "center", justifyContent: "space-between", background: "rgba(0,0,0,0.15)" }}>
            <div style={{ display: "flex", alignItems: "center", gap: 8 }}>
              <span style={{ fontSize: 12 }}>ğŸ“„</span>
              <span style={{ fontFamily: "DM Mono,monospace", fontSize: 11, color: "var(--text)" }}>src/App.jsx</span>
              <span style={{ fontSize: 9, padding: "1px 6px", borderRadius: 3, background: "rgba(239,68,68,0.15)", color: "#ef4444", fontFamily: "DM Mono,monospace", border: "1px solid rgba(239,68,68,0.3)" }}>
                {allResolved ? "RESOLVED" : `${sections.length - resolvedCount} CONFLICTS`}
              </span>
            </div>
            <div style={{ display: "flex", gap: 4 }}>
              {[{ id: "split", label: "ë¶„í•  ë·°" }, { id: "markers", label: "ë§ˆì»¤ ë·°" }].map(v => (
                <button key={v.id} onClick={() => setViewMode(v.id)}
                  style={{ padding: "3px 10px", borderRadius: 4, fontSize: 9, fontFamily: "DM Mono,monospace", cursor: "pointer", border: "1px solid",
                    background: viewMode === v.id ? "rgba(0,212,255,0.12)" : "transparent",
                    borderColor: viewMode === v.id ? "rgba(0,212,255,0.3)" : "var(--border)",
                    color: viewMode === v.id ? "var(--accent)" : "var(--text-muted)", transition: "all .2s" }}>
                  {v.label}
                </button>
              ))}
            </div>
          </div>

          <div style={{ padding: 16, overflowY: "auto", flex: 1 }}>
            {/* 3-way column headers (split view only) */}
            {viewMode === "split" && (
              <div style={{ display: "grid", gridTemplateColumns: "1fr 1fr 1fr", gap: 8, marginBottom: 12 }}>
                {[{ label: "BASE (ê³µí†µ ì¡°ìƒ)", color: "#64748b" }, { label: "OURS (í˜„ì¬ ë¸Œëœì¹˜ Â· main)", color: "#22c55e" }, { label: "THEIRS (ìˆ˜ì‹  Â· feature)", color: "#00d4ff" }].map((h, i) => (
                  <div key={i} style={{ textAlign: "center", padding: "6px 8px", background: `${h.color}10`, borderRadius: 6, border: `1px solid ${h.color}20`, fontSize: 9, color: h.color, fontFamily: "DM Mono,monospace" }}>{h.label}</div>
                ))}
              </div>
            )}

            {/* Marker view header */}
            {viewMode === "markers" && (
              <div style={{ marginBottom: 12, padding: "8px 12px", background: "rgba(239,68,68,0.06)", border: "1px solid rgba(239,68,68,0.15)", borderRadius: 8 }}>
                <div style={{ fontSize: 10, color: "#ef4444", fontFamily: "DM Mono,monospace", marginBottom: 4 }}>ì¶©ëŒ ë§ˆì»¤ ë·°</div>
                <div style={{ fontSize: 11, color: "var(--text-muted)" }}>ì‹¤ì œ Gitì´ íŒŒì¼ì— ì‚½ì…í•˜ëŠ” ì¶©ëŒ ë§ˆì»¤ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤. ì—ë””í„°ì—ì„œ ì´ ë§ˆì»¤ë¥¼ ì§ì ‘ í¸ì§‘í•˜ì—¬ í•´ê²°í•©ë‹ˆë‹¤.</div>
              </div>
            )}

            {/* Conflict sections */}
            {sections.map((sec, si) => (
              <div key={sec.id} style={{ marginBottom: 16, animation: `staggerReveal .3s ease ${si * .06}s both` }}>
                {/* Section header */}
                <div style={{ display: "flex", alignItems: "center", gap: 8, marginBottom: 6 }}>
                  <span style={{ fontFamily: "DM Mono,monospace", fontSize: 9, color: sec.resolved ? "#22c55e" : "#ef4444",
                    padding: "1px 6px", borderRadius: 3, background: sec.resolved ? "rgba(34,197,94,0.12)" : "rgba(239,68,68,0.12)",
                    border: `1px solid ${sec.resolved ? "rgba(34,197,94,0.3)" : "rgba(239,68,68,0.3)"}` }}>
                    {sec.resolved ? "âœ“ RESOLVED" : `CONFLICT #${si + 1}`}
                  </span>
                  <span style={{ fontSize: 10, color: "var(--text-muted)", fontFamily: "DM Mono,monospace" }}>Line {sec.line} Â· {sec.label}</span>
                  {sec.choice && <span style={{ fontSize: 9, color: choiceColors[sec.choice], fontFamily: "DM Mono,monospace" }}>({choiceLabels[sec.choice]})</span>}
                </div>

                {/* Resolved state */}
                {sec.resolved ? (
                  <div style={{ position: "relative", padding: "10px 14px", background: "rgba(34,197,94,0.06)", border: "1px solid rgba(34,197,94,0.25)", borderRadius: 8,
                    fontFamily: "DM Mono,monospace", fontSize: 11, color: "#22c55e", animation: "successPop .4s cubic-bezier(.34,1.56,.64,1)", whiteSpace: "pre-wrap", lineHeight: 1.7 }}>
                    {sec.resolved}
                    {phase !== "done" && (
                      <button onClick={() => undoResolve(sec.id)}
                        style={{ position: "absolute", top: 6, right: 8, background: "rgba(239,68,68,0.12)", border: "1px solid rgba(239,68,68,0.3)",
                          color: "#ef4444", fontSize: 9, padding: "2px 8px", borderRadius: 4, cursor: "pointer", fontFamily: "DM Mono,monospace", transition: "all .2s" }}
                        onMouseEnter={e => e.target.style.background = "rgba(239,68,68,0.25)"}
                        onMouseLeave={e => e.target.style.background = "rgba(239,68,68,0.12)"}>
                        â†© ë˜ëŒë¦¬ê¸°
                      </button>
                    )}
                  </div>
                ) : editingId === sec.id ? (
                  /* Custom edit mode */
                  <div style={{ animation: "slideDown .3s ease" }}>
                    <textarea value={editText} onChange={e => setEditText(e.target.value)}
                      style={{ width: "100%", minHeight: 60, padding: "10px 12px", background: "rgba(167,139,250,0.06)", border: "1px solid rgba(167,139,250,0.35)",
                        borderRadius: 8, fontFamily: "DM Mono,monospace", fontSize: 11, color: "#a78bfa", resize: "vertical",
                        outline: "none", lineHeight: 1.7 }}
                      placeholder="í•´ê²°í•  ì½”ë“œë¥¼ ì§ì ‘ ì‘ì„±í•˜ì„¸ìš”..." />
                    <div style={{ display: "flex", gap: 6, marginTop: 6 }}>
                      <button onClick={() => confirmEdit(sec.id)} className="sim-btn" style={{ padding: "5px 14px", fontSize: 10 }}>âœ“ ì ìš©</button>
                      <button onClick={() => { setEditingId(null); setEditText(""); }} className="ghost-btn" style={{ padding: "5px 14px", fontSize: 10 }}>ì·¨ì†Œ</button>
                    </div>
                  </div>
                ) : viewMode === "markers" ? (
                  /* Marker view */
                  <div style={{ borderRadius: 8, overflow: "hidden", border: "1px solid rgba(239,68,68,0.25)" }}>
                    <div style={{ padding: "6px 12px", fontFamily: "DM Mono,monospace", fontSize: 10, lineHeight: 1.8 }}>
                      <div style={{ color: "#ef4444", fontWeight: "bold" }}>{"<<<<<<< HEAD (main)"}</div>
                      <div style={{ color: "#22c55e", background: "rgba(34,197,94,0.06)", padding: "2px 8px", margin: "2px 0", borderRadius: 3 }}>{sec.ours}</div>
                      <div style={{ color: "#ef4444", fontWeight: "bold" }}>{"======="}</div>
                      <div style={{ color: "#00d4ff", background: "rgba(0,212,255,0.06)", padding: "2px 8px", margin: "2px 0", borderRadius: 3 }}>{sec.theirs}</div>
                      <div style={{ color: "#ef4444", fontWeight: "bold" }}>{">>>>>>> feature/new-component"}</div>
                    </div>
                    <div style={{ display: "flex", gap: 4, padding: "6px 8px", borderTop: "1px solid var(--border)", background: "rgba(0,0,0,0.15)" }}>
                      {[{ k: "ours", l: "Accept Current", c: "#22c55e" }, { k: "theirs", l: "Accept Incoming", c: "#00d4ff" },
                        { k: "both", l: "Accept Both", c: "#f59e0b" }].map(b => (
                        <button key={b.k} onClick={() => choose(sec.id, b.k)}
                          style={{ flex: 1, padding: "4px 0", background: `${b.c}10`, border: `1px solid ${b.c}30`, color: b.c, borderRadius: 4,
                            fontSize: 9, fontFamily: "DM Mono,monospace", cursor: "pointer", transition: "all .2s" }}
                          onMouseEnter={e => e.target.style.background = `${b.c}28`}
                          onMouseLeave={e => e.target.style.background = `${b.c}10`}>{b.l}</button>
                      ))}
                      <button onClick={() => startEdit(sec.id)}
                        style={{ flex: 1, padding: "4px 0", background: "rgba(167,139,250,0.1)", border: "1px solid rgba(167,139,250,0.3)", color: "#a78bfa", borderRadius: 4,
                          fontSize: 9, fontFamily: "DM Mono,monospace", cursor: "pointer", transition: "all .2s" }}
                        onMouseEnter={e => e.target.style.background = "rgba(167,139,250,0.25)"}
                        onMouseLeave={e => e.target.style.background = "rgba(167,139,250,0.1)"}
                      >âœï¸ í¸ì§‘</button>
                    </div>
                  </div>
                ) : (
                  /* Split 3-column view */
                  <div>
                    <div style={{ display: "grid", gridTemplateColumns: "1fr 1fr 1fr", gap: 6 }}>
                      {[{ key: "base", code: sec.base, color: "#64748b" }, { key: "ours", code: sec.ours, color: "#22c55e" }, { key: "theirs", code: sec.theirs, color: "#00d4ff" }].map(opt => (
                        <div key={opt.key}>
                          <div style={{ padding: "8px 10px", background: `${opt.color}08`, border: `1px solid ${opt.color}20`, borderRadius: 6,
                            fontFamily: "DM Mono,monospace", fontSize: 10, color: opt.color, lineHeight: 1.6,
                            animation: opt.key !== "base" ? "conflictFlash 2.5s infinite" : "none", minHeight: 48 }}>
                            {opt.code}
                          </div>
                          {opt.key !== "base" && (
                            <button onClick={() => choose(sec.id, opt.key)}
                              style={{ width: "100%", marginTop: 4, padding: "4px 0", background: `${opt.color}12`, border: `1px solid ${opt.color}35`,
                                color: opt.color, borderRadius: 5, fontSize: 9, fontFamily: "DM Mono,monospace", cursor: "pointer", transition: "all .2s" }}
                              onMouseEnter={e => e.target.style.background = `${opt.color}30`}
                              onMouseLeave={e => e.target.style.background = `${opt.color}12`}>
                              {opt.key === "ours" ? "Accept Current" : "Accept Incoming"}
                            </button>
                          )}
                        </div>
                      ))}
                    </div>
                    {/* Accept Both + Edit buttons */}
                    <div style={{ display: "flex", gap: 6, marginTop: 6 }}>
                      <button onClick={() => choose(sec.id, "both")}
                        style={{ flex: 1, padding: "5px 0", background: "rgba(245,158,11,0.08)", border: "1px solid rgba(245,158,11,0.3)",
                          color: "#f59e0b", borderRadius: 5, fontSize: 9, fontFamily: "DM Mono,monospace", cursor: "pointer", transition: "all .2s" }}
                        onMouseEnter={e => e.target.style.background = "rgba(245,158,11,0.2)"}
                        onMouseLeave={e => e.target.style.background = "rgba(245,158,11,0.08)"}>
                        âš¡ Accept Both Changes
                      </button>
                      <button onClick={() => startEdit(sec.id)}
                        style={{ flex: 1, padding: "5px 0", background: "rgba(167,139,250,0.08)", border: "1px solid rgba(167,139,250,0.3)",
                          color: "#a78bfa", borderRadius: 5, fontSize: 9, fontFamily: "DM Mono,monospace", cursor: "pointer", transition: "all .2s" }}
                        onMouseEnter={e => e.target.style.background = "rgba(167,139,250,0.2)"}
                        onMouseLeave={e => e.target.style.background = "rgba(167,139,250,0.08)"}>
                        âœï¸ ì§ì ‘ í¸ì§‘
                      </button>
                    </div>
                  </div>
                )}
              </div>
            ))}

            {/* Action buttons */}
            <div style={{ display: "flex", gap: 8, marginTop: 8, flexWrap: "wrap" }}>
              {allResolved && phase === "resolving" && (
                <button className="sim-btn" onClick={stageFile} style={{ animation: "pulse 2s infinite" }}>
                  ğŸ“‹ git add â€” ìŠ¤í…Œì´ì§•
                </button>
              )}
              {phase === "staging" && (
                <button className="sim-btn" onClick={commitResolve} style={{ animation: "pulse 2s infinite" }}>
                  âœ“ git commit â€” ë³‘í•© ì™„ë£Œ
                </button>
              )}
              <button className="ghost-btn" onClick={reset}>â†º ì´ˆê¸°í™”</button>
            </div>

            {/* Final merged file preview */}
            {phase === "done" && (
              <div style={{ marginTop: 16, animation: "successPop .5s cubic-bezier(.34,1.56,.64,1)" }}>
                <div style={{ padding: "14px 16px", background: "rgba(34,197,94,0.08)", border: "1px solid rgba(34,197,94,0.25)", borderRadius: 10 }}>
                  <div style={{ fontFamily: "Syne,sans-serif", fontWeight: 700, color: "#22c55e", marginBottom: 8, fontSize: 14 }}>ğŸ‰ Merge ì™„ë£Œ!</div>
                  <div style={{ fontSize: 11, color: "var(--text-muted)", marginBottom: 10 }}>ìµœì¢… ë³‘í•©ëœ App.jsx:</div>
                  <div style={{ background: "#0d1117", borderRadius: 8, padding: 12, fontFamily: "DM Mono,monospace", fontSize: 11, lineHeight: 2, color: "#22c55e" }}>
                    {sections.map((sec, i) => (
                      <div key={sec.id} style={{ color: choiceColors[sec.choice] || "#22c55e", whiteSpace: "pre-wrap" }}>{sec.resolved}</div>
                    ))}
                    <div style={{ color: "#64748b" }}>{"}"}</div>
                  </div>
                </div>
              </div>
            )}
          </div>
        </div>

        {/* Terminal */}
        <div style={{ background: "#0d1117", fontFamily: "DM Mono,monospace", fontSize: 11, display: "flex", flexDirection: "column" }}>
          <div style={{ padding: "8px 14px", borderBottom: "1px solid #1e2d45", display: "flex", alignItems: "center", gap: 6, flexShrink: 0 }}>
            <div style={{ width: 8, height: 8, borderRadius: "50%", background: "#ef4444" }} />
            <div style={{ width: 8, height: 8, borderRadius: "50%", background: "#f59e0b" }} />
            <div style={{ width: 8, height: 8, borderRadius: "50%", background: "#22c55e" }} />
            <span style={{ flex: 1, textAlign: "center", fontSize: 9, color: "#374151" }}>~/project</span>
          </div>
          <div style={{ padding: 14, flex: 1, overflowY: "auto", maxHeight: 400 }}>
            {log.map((l, i) => (
              <div key={i} style={{ lineHeight: 1.8, animation: "fadeInLeft .2s ease",
                color: l.type === "cmd" ? "var(--accent)" : l.type === "err" ? "#ef4444" : l.type === "out" ? "#22c55e"
                  : l.type === "stat" ? "#f59e0b" : l.type === "info" ? "#a78bfa" : l.type === "warn" ? "#f97316" : "#64748b",
                paddingLeft: l.type === "info" || l.type === "warn" || l.type === "stat" ? 4 : 0 }}>
                {l.type === "cmd" && <><span style={{ color: "#7c3aed" }}>â¯ </span>{l.text}</>}
                {l.type === "err" && <span style={{ fontWeight: l.text.includes("CONFLICT") ? "bold" : "normal" }}>{l.text}</span>}
                {l.type === "out" && l.text}
                {l.type === "stat" && <span style={{ opacity: 0.7 }}>{l.text}</span>}
                {l.type === "info" && l.text}
                {l.type === "warn" && l.text}
                {l.type === "blank" && <br />}
              </div>
            ))}
            <div ref={logEndRef} />
          </div>
        </div>
      </div>
    </div>
  );
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SIMULATION 3 â€” GIT RESET STEP BY STEP
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function ResetSim() {
  const COMMITS_INIT = [
    { id: "a1b2c3d", msg: "Initial commit", files: ["index.html"] },
    { id: "e4f5g6h", msg: "Add feature A", files: ["feature-a.js"] },
    { id: "i7j8k9l", msg: "Fix bug #12", files: ["bugfix.js"] },
    { id: "m1n2o3p", msg: "Add feature B", files: ["feature-b.js", "styles.css"] },
  ];

  const MODES = [
    { id: "soft", label: "--soft", color: "#f59e0b", icon: "ğŸŸ¡", risk: 1, riskLabel: "ë‚®ìŒ",
      desc: "ì»¤ë°‹ë§Œ ë˜ëŒë¦½ë‹ˆë‹¤. ë³€ê²½ì‚¬í•­ì€ Staging Areaì— ë‚¨ì•„ìˆì–´ ë°”ë¡œ ë‹¤ì‹œ ì»¤ë°‹í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
      useCase: "ì»¤ë°‹ ë©”ì‹œì§€ë¥¼ ìˆ˜ì •í•˜ê±°ë‚˜, ì—¬ëŸ¬ ì»¤ë°‹ì„ í•˜ë‚˜ë¡œ í•©ì¹  ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.",
      staging: true, working: true },
    { id: "mixed", label: "--mixed (ê¸°ë³¸ê°’)", color: "#f97316", icon: "ğŸŸ ", risk: 2, riskLabel: "ë³´í†µ",
      desc: "ì»¤ë°‹ì„ ë˜ëŒë¦¬ê³  Stagingë„ í•´ì œí•©ë‹ˆë‹¤. ë³€ê²½ì‚¬í•­ì€ Working Directoryì— ë‚¨ìŠµë‹ˆë‹¤.",
      useCase: "ì‹¤ìˆ˜ë¡œ addí•œ íŒŒì¼ì„ ë‹¤ì‹œ ì„ ë³„ì ìœ¼ë¡œ addí•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.",
      staging: false, working: true },
    { id: "hard", label: "--hard", color: "#ef4444", icon: "ğŸ”´", risk: 3, riskLabel: "ë†’ìŒ",
      desc: "ì»¤ë°‹, Staging, Working ëª¨ë‘ ì‚­ì œí•©ë‹ˆë‹¤. ë³€ê²½ì‚¬í•­ì´ ì™„ì „íˆ ì‚¬ë¼ì§‘ë‹ˆë‹¤!",
      useCase: "ì‹¤í—˜ì  ë³€ê²½ì„ ì™„ì „íˆ íê¸°í•˜ê³  ê¹¨ë—í•œ ìƒíƒœë¡œ ëŒì•„ê°ˆ ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.",
      staging: false, working: false },
  ];

  const [mode, setMode] = useState(null);
  const [commits, setCommits] = useState(COMMITS_INIT);
  const [staging, setStaging] = useState([]);
  const [working, setWorking] = useState([]);
  const [done, setDone] = useState(false);
  const [log, setLog] = useState([]);
  const logEndRef = useRef(null);

  useEffect(() => { if (logEndRef.current) logEndRef.current.scrollIntoView({ behavior: "smooth" }); }, [log.length]);

  const removedFiles = COMMITS_INIT[COMMITS_INIT.length - 1].files;
  const headIdx = commits.length - 1;

  const doReset = (m) => {
    if (!m) return;
    const newCommits = COMMITS_INIT.slice(0, -1);
    setCommits(newCommits);

    const newLog = [
      { type: "cmd", text: `git reset ${m.label.split(" ")[0]} HEAD~1` },
      { type: "out", text: `HEAD is now at i7j8k9l Fix bug #12` },
      { type: "blank", text: "" },
    ];

    if (m.id === "soft") {
      setStaging(removedFiles);
      setWorking([]);
      newLog.push({ type: "info", text: "ë³€ê²½ì‚¬í•­ì´ Staging Areaì— ìœ ì§€ë©ë‹ˆë‹¤." });
      newLog.push({ type: "blank", text: "" });
      newLog.push({ type: "cmd", text: "git status" });
      newLog.push({ type: "out", text: "On branch main" });
      newLog.push({ type: "out", text: "Changes to be committed:" });
      removedFiles.forEach(f => newLog.push({ type: "stat", text: `  new file:   ${f}` }));
    } else if (m.id === "mixed") {
      setStaging([]);
      setWorking(removedFiles);
      newLog.push({ type: "info", text: "ë³€ê²½ì‚¬í•­ì´ Working Directoryì— ìœ ì§€ë©ë‹ˆë‹¤." });
      newLog.push({ type: "blank", text: "" });
      newLog.push({ type: "cmd", text: "git status" });
      newLog.push({ type: "out", text: "On branch main" });
      newLog.push({ type: "out", text: "Untracked files:" });
      removedFiles.forEach(f => newLog.push({ type: "warn", text: `  ${f}` }));
    } else {
      setStaging([]);
      setWorking([]);
      newLog.push({ type: "err", text: "âš ï¸  ëª¨ë“  ë³€ê²½ì‚¬í•­ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤!" });
      newLog.push({ type: "blank", text: "" });
      newLog.push({ type: "cmd", text: "git status" });
      newLog.push({ type: "out", text: "On branch main" });
      newLog.push({ type: "out", text: "nothing to commit, working tree clean" });
    }

    newLog.push({ type: "blank", text: "" });
    newLog.push({ type: "cmd", text: "git reflog" });
    newLog.push({ type: "graph", text: "i7j8k9l (HEAD -> main) HEAD@{0}: reset: moving to HEAD~1" });
    newLog.push({ type: "graph", text: "m1n2o3p HEAD@{1}: commit: Add feature B" });
    newLog.push({ type: "graph", text: "i7j8k9l HEAD@{2}: commit: Fix bug #12" });

    setLog(newLog);
    setDone(true);
  };

  const reset = () => { setMode(null); setCommits(COMMITS_INIT); setStaging([]); setWorking([]); setDone(false); setLog([]); };

  const ResetZone = ({ title, icon, color, files, active, check }) => (
    <div style={{ padding: 14, background: active ? `${color}0c` : "rgba(0,0,0,0.15)", border: `1px solid ${active ? color + "40" : "var(--border)"}`,
      borderRadius: 10, transition: "all .5s cubic-bezier(.34,1.2,.64,1)", minHeight: 90, flex: 1,
      boxShadow: active ? `0 0 16px ${color}20` : "none" }}>
      <div style={{ display: "flex", alignItems: "center", gap: 6, marginBottom: 8 }}>
        <span style={{ fontSize: 14 }}>{icon}</span>
        <span style={{ fontSize: 10, color: active ? color : "var(--text-muted)", fontFamily: "DM Mono,monospace", letterSpacing: 1 }}>{title}</span>
        {done && <span style={{ marginLeft: "auto", fontSize: 10, fontFamily: "DM Mono,monospace", color: check ? "#22c55e" : "#ef4444" }}>{check ? "âœ“ ìœ ì§€" : "âœ— ë¹„ì–´ìˆìŒ"}</span>}
      </div>
      {files.length > 0 ? files.map((f, i) => (
        <div key={f} style={{ fontSize: 11, color, fontFamily: "DM Mono,monospace", padding: "3px 8px", marginBottom: 3,
          background: `${color}0a`, borderRadius: 4, border: `1px solid ${color}18`,
          animation: `staggerReveal .4s ease ${i * .08}s both`, display: "flex", alignItems: "center", gap: 6 }}>
          <span style={{ fontSize: 10 }}>ğŸ“„</span> {f}
        </div>
      )) : (
        <div style={{ fontSize: 11, color: "var(--text-muted)", textAlign: "center", padding: "10px 0" }}>{done ? "ë¹„ì–´ìˆìŒ" : "â€”"}</div>
      )}
    </div>
  );

  return (
    <div style={{ background: "var(--surface2)", borderRadius: 14, overflow: "hidden", border: "1px solid var(--border)" }}>
      {/* Header */}
      <div style={{ padding: "14px 18px", borderBottom: "1px solid var(--border)", display: "flex", alignItems: "center", justifyContent: "space-between", flexWrap: "wrap", gap: 8 }}>
        <span style={{ fontFamily: "DM Mono,monospace", fontSize: 13, color: "#f97316" }}>âª Git Reset ë‹¨ê³„ë³„ ì‹œë®¬ë ˆì´í„°</span>
        {done && mode && (
          <span style={{ fontSize: 10, fontFamily: "DM Mono,monospace", padding: "3px 10px", borderRadius: 5,
            background: `${mode.color}15`, color: mode.color, border: `1px solid ${mode.color}35`, animation: "fadeInUp .3s ease" }}>
            {mode.icon} git reset {mode.label.split(" ")[0]} HEAD~1 ì‹¤í–‰ë¨
          </span>
        )}
      </div>

      <div className="sim-grid-eq">
        {/* Left: Commit history + 3 zones */}
        <div style={{ padding: 18, borderRight: "1px solid var(--border)" }}>
          {/* Commit list */}
          <div style={{ marginBottom: 18 }}>
            <div style={{ fontSize: 10, color: "var(--text-muted)", fontFamily: "DM Mono,monospace", letterSpacing: 1, marginBottom: 10 }}>COMMIT HISTORY (Repository)</div>
            {COMMITS_INIT.map((c, i) => {
              const isRemoved = done && i === COMMITS_INIT.length - 1;
              const isNewHead = done && i === COMMITS_INIT.length - 2;
              const isVisible = !isRemoved;
              const isOldHead = !done && i === COMMITS_INIT.length - 1;
              return (
                <div key={c.id} style={{ display: "flex", alignItems: "center", gap: 10, padding: "8px 12px", borderRadius: 8, marginBottom: 4,
                  background: isNewHead ? "rgba(0,212,255,0.08)" : isOldHead ? "rgba(0,212,255,0.08)" : isRemoved ? "rgba(239,68,68,0.06)" : "transparent",
                  border: `1px solid ${isNewHead || isOldHead ? "rgba(0,212,255,0.2)" : isRemoved ? "rgba(239,68,68,0.2)" : "transparent"}`,
                  opacity: isRemoved ? 0.35 : 1, textDecoration: isRemoved ? "line-through" : "none",
                  transition: "all .5s cubic-bezier(.34,1.2,.64,1)", animation: `staggerReveal .4s ease ${i * .05}s both` }}>
                  <div style={{ width: 8, height: 8, borderRadius: "50%", flexShrink: 0, transition: "all .4s",
                    background: isRemoved ? "#ef4444" : isNewHead || isOldHead ? "#00d4ff" : "#22c55e",
                    boxShadow: isNewHead || isOldHead ? "0 0 8px rgba(0,212,255,0.5)" : "none" }} />
                  <code style={{ fontFamily: "DM Mono,monospace", fontSize: 10, color: isRemoved ? "#ef4444" : "#f59e0b", flexShrink: 0 }}>{c.id.slice(0, 7)}</code>
                  <span style={{ fontSize: 11, color: isRemoved ? "#ef4444" : isNewHead || isOldHead ? "var(--accent)" : "var(--text-muted)", flex: 1 }}>{c.msg}</span>
                  {(isNewHead || isOldHead) && <span style={{ fontSize: 9, color: "#7c3aed", fontFamily: "DM Mono,monospace", padding: "1px 6px", borderRadius: 3, background: "rgba(124,58,237,0.12)", border: "1px solid rgba(124,58,237,0.25)" }}>HEAD</span>}
                  {isRemoved && <span style={{ fontSize: 9, color: "#ef4444", fontFamily: "DM Mono,monospace" }}>ì œê±°ë¨</span>}
                </div>
              );
            })}
          </div>

          {/* 3 zones with flow arrows */}
          <div style={{ fontSize: 10, color: "var(--text-muted)", fontFamily: "DM Mono,monospace", letterSpacing: 1, marginBottom: 10 }}>ë³€ê²½ì‚¬í•­ ìœ„ì¹˜</div>
          <div style={{ display: "flex", gap: 6, alignItems: "stretch" }}>
            <ResetZone title="Staging Area" icon="ğŸ“‹" color="#f59e0b" files={staging} active={staging.length > 0} check={mode?.staging} />
            <div style={{ display: "flex", alignItems: "center", color: "var(--text-muted)", fontSize: 16, flexShrink: 0 }}>â†’</div>
            <ResetZone title="Working Dir" icon="ğŸ“" color="#f97316" files={working} active={working.length > 0} check={mode?.working} />
          </div>

          {/* Mode comparison table (after done) */}
          {done && (
            <div style={{ marginTop: 16, animation: "slideDown .4s ease" }}>
              <div style={{ fontSize: 10, color: "var(--text-muted)", fontFamily: "DM Mono,monospace", letterSpacing: 1, marginBottom: 8 }}>3ê°œ ëª¨ë“œ ë¹„êµ</div>
              <div style={{ display: "grid", gridTemplateColumns: "1fr 1fr 1fr", gap: 6 }}>
                {MODES.map(m => {
                  const isActive = mode?.id === m.id;
                  return (
                    <div key={m.id} style={{ padding: "10px 10px", borderRadius: 8, textAlign: "center",
                      background: isActive ? `${m.color}14` : "rgba(0,0,0,0.15)",
                      border: `2px solid ${isActive ? m.color : "var(--border)"}`,
                      boxShadow: isActive ? `0 0 12px ${m.color}30` : "none", transition: "all .3s" }}>
                      <div style={{ fontSize: 12, marginBottom: 4 }}>{m.icon}</div>
                      <div style={{ fontSize: 10, fontFamily: "DM Mono,monospace", color: m.color, fontWeight: isActive ? "bold" : "normal", marginBottom: 6 }}>{m.label.split(" ")[0]}</div>
                      <div style={{ fontSize: 9, color: "var(--text-muted)", lineHeight: 1.8 }}>
                        <div>Staging: <span style={{ color: m.staging ? "#22c55e" : "#ef4444" }}>{m.staging ? "âœ“ ìœ ì§€" : "âœ— ì‚­ì œ"}</span></div>
                        <div>Working: <span style={{ color: m.working ? "#22c55e" : "#ef4444" }}>{m.working ? "âœ“ ìœ ì§€" : "âœ— ì‚­ì œ"}</span></div>
                      </div>
                      {isActive && <div style={{ fontSize: 8, color: m.color, fontFamily: "DM Mono,monospace", marginTop: 4, animation: "pulse 2s infinite" }}>â— í˜„ì¬ ì„ íƒ</div>}
                    </div>
                  );
                })}
              </div>
            </div>
          )}
        </div>

        {/* Right: Mode selector + terminal */}
        <div style={{ display: "flex", flexDirection: "column" }}>
          <div style={{ padding: 18, flex: done ? "none" : 1 }}>
            <div style={{ fontSize: 10, color: "var(--text-muted)", fontFamily: "DM Mono,monospace", letterSpacing: 1, marginBottom: 12 }}>RESET ëª¨ë“œ ì„ íƒ</div>

            {MODES.map(m => (
              <div key={m.id} onClick={() => !done && setMode(m)}
                style={{ padding: 14, borderRadius: 10, marginBottom: 8, cursor: done ? "default" : "pointer", transition: "all .3s cubic-bezier(.34,1.56,.64,1)",
                  background: mode?.id === m.id ? `${m.color}10` : "transparent",
                  border: `2px solid ${mode?.id === m.id ? m.color : "var(--border)"}`,
                  transform: mode?.id === m.id ? "scale(1.02)" : "scale(1)",
                  opacity: done && mode?.id !== m.id ? 0.4 : 1 }}>
                <div style={{ display: "flex", alignItems: "center", gap: 8, marginBottom: 4 }}>
                  <span>{m.icon}</span>
                  <code style={{ fontFamily: "DM Mono,monospace", fontSize: 12, color: m.color }}>git reset {m.label.split(" ")[0]} HEAD~1</code>
                  {/* Risk meter */}
                  <div style={{ marginLeft: "auto", display: "flex", gap: 2, alignItems: "center" }}>
                    {[1, 2, 3].map(r => (
                      <div key={r} style={{ width: 10, height: 10, borderRadius: 2, background: r <= m.risk ? m.color : "var(--border)", transition: "background .3s" }} />
                    ))}
                    <span style={{ fontSize: 9, color: m.color, fontFamily: "DM Mono,monospace", marginLeft: 4 }}>{m.riskLabel}</span>
                  </div>
                </div>
                <div style={{ fontSize: 11, color: "var(--text-muted)", lineHeight: 1.6, marginBottom: 4 }}>{m.desc}</div>
                {mode?.id === m.id && !done && (
                  <div style={{ fontSize: 10, color: m.color, fontFamily: "DM Mono,monospace", padding: "4px 8px", marginTop: 4,
                    background: `${m.color}0a`, borderRadius: 5, border: `1px solid ${m.color}20`, animation: "slideDown .3s ease" }}>
                    ğŸ’¡ {m.useCase}
                  </div>
                )}
              </div>
            ))}

            <div style={{ display: "flex", gap: 8, marginTop: 12, alignItems: "center" }}>
              <button className="sim-btn" onClick={() => doReset(mode)} disabled={!mode || done}
                style={mode && !done ? { animation: "pulse 2s infinite" } : {}}>
                {done ? `âœ“ ${mode?.label.split(" ")[0]} ì‹¤í–‰ ì™„ë£Œ` : "â–¶ ì‹¤í–‰"}
              </button>
              <button className="ghost-btn" onClick={reset}>â†º ì´ˆê¸°í™”</button>
            </div>
          </div>

          {/* Terminal */}
          {log.length > 0 && (
            <div style={{ background: "#0d1117", flex: 1, display: "flex", flexDirection: "column", borderTop: "1px solid #1e2d45" }}>
              <div style={{ padding: "8px 14px", borderBottom: "1px solid #1e2d45", display: "flex", alignItems: "center", gap: 6, flexShrink: 0 }}>
                <div style={{ width: 8, height: 8, borderRadius: "50%", background: "#ef4444" }} />
                <div style={{ width: 8, height: 8, borderRadius: "50%", background: "#f59e0b" }} />
                <div style={{ width: 8, height: 8, borderRadius: "50%", background: "#22c55e" }} />
                <span style={{ flex: 1, textAlign: "center", fontSize: 9, color: "#374151" }}>~/project</span>
              </div>
              <div style={{ padding: 12, overflowY: "auto", flex: 1, maxHeight: 400 }}>
                {log.map((l, i) => (
                  <div key={i} style={{ lineHeight: 1.8, animation: `fadeInLeft .2s ease ${i * .04}s both`,
                    color: l.type === "cmd" ? "var(--accent)" : l.type === "out" ? "#22c55e" : l.type === "err" ? "#ef4444"
                      : l.type === "stat" ? "#f59e0b" : l.type === "info" ? "#a78bfa" : l.type === "warn" ? "#f97316" : l.type === "graph" ? "#a78bfa" : "#64748b",
                    paddingLeft: l.type === "stat" || l.type === "warn" || l.type === "graph" ? 4 : 0 }}>
                    {l.type === "cmd" && <><span style={{ color: "#7c3aed" }}>â¯ </span>{l.text}</>}
                    {l.type === "out" && l.text}
                    {l.type === "err" && <span style={{ fontWeight: "bold" }}>{l.text}</span>}
                    {l.type === "stat" && <span style={{ color: "#22c55e" }}>{l.text}</span>}
                    {l.type === "info" && l.text}
                    {l.type === "warn" && <span style={{ color: "#f97316" }}>{l.text}</span>}
                    {l.type === "graph" && <span style={{ opacity: 0.8 }}>{l.text}</span>}
                    {l.type === "blank" && <br />}
                  </div>
                ))}
                <div ref={logEndRef} />
                {done && (
                  <div style={{ marginTop: 8, padding: "8px 10px", background: "rgba(167,139,250,0.08)", borderRadius: 6, border: "1px solid rgba(167,139,250,0.2)", animation: "fadeInUp .3s ease" }}>
                    <div style={{ fontSize: 10, color: "#a78bfa", fontFamily: "DM Mono,monospace" }}>ğŸ’¡ ë³µêµ¬ íŒ: git reflogë¡œ ì´ì „ ì»¤ë°‹ í•´ì‹œë¥¼ ì°¾ì•„</div>
                    <div style={{ fontSize: 10, color: "#a78bfa", fontFamily: "DM Mono,monospace" }}>   git reset --hard m1n2o3p ë¡œ ë˜ëŒë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</div>
                  </div>
                )}
              </div>
            </div>
          )}
        </div>
      </div>
    </div>
  );
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SIMULATION 4 â€” TEAM PR WORKFLOW
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function PRWorkflowSim() {
  const STEPS = [
    { id: 0, actor: "ê°œë°œì", role: "dev", action: "feature ë¸Œëœì¹˜ ìƒì„± & ì½”ë”©", cmd: "git switch -c feature/dark-mode", icon: "ğŸ‘©â€ğŸ’»", color: "#00d4ff", status: "coding",
      explain: "mainì—ì„œ ë¶„ê¸°í•˜ì—¬ ë…ë¦½ì ì¸ feature ë¸Œëœì¹˜ë¥¼ ë§Œë“­ë‹ˆë‹¤. ì´ ë¸Œëœì¹˜ì—ì„œ ëª¨ë“  ê°œë°œì´ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤." },
    { id: 1, actor: "ê°œë°œì", role: "dev", action: "ë³€ê²½ì‚¬í•­ ì»¤ë°‹ & í‘¸ì‹œ", cmd: "git push -u origin feature/dark-mode", icon: "ğŸ“¤", color: "#7c3aed", status: "pushed",
      explain: "ë¡œì»¬ ì»¤ë°‹ì„ ì›ê²© ì €ì¥ì†Œì— ì˜¬ë¦½ë‹ˆë‹¤. -u í”Œë˜ê·¸ë¡œ upstreamì„ ì„¤ì •í•˜ë©´ ì´í›„ git pushë§Œìœ¼ë¡œ í‘¸ì‹œ ê°€ëŠ¥í•©ë‹ˆë‹¤." },
    { id: 2, actor: "ê°œë°œì", role: "dev", action: "Pull Request ìƒì„±", cmd: "gh pr create --title 'Add dark mode'", icon: "ğŸ”€", color: "#f59e0b", status: "pr_open",
      explain: "GitHubì—ì„œ PRì„ ìƒì„±í•©ë‹ˆë‹¤. ë³€ê²½ì‚¬í•­ ì„¤ëª…, ë¦¬ë·°ì–´ ì§€ì •, ë¼ë²¨ ì¶”ê°€ë¥¼ í•©ë‹ˆë‹¤." },
    { id: 3, actor: "ë¦¬ë·°ì–´", role: "reviewer", action: "ì½”ë“œ ë¦¬ë·° & í”¼ë“œë°±", cmd: "GitHub â†’ Review Changes", icon: "ğŸ‘€", color: "#f97316", status: "review",
      explain: "ë¦¬ë·°ì–´ê°€ ì½”ë“œë¥¼ ê²€í† í•˜ê³  ê°œì„ ì ì„ ì½”ë©˜íŠ¸ë¡œ ë‚¨ê¹ë‹ˆë‹¤. Request Changesë¡œ ìˆ˜ì •ì„ ìš”ì²­í•©ë‹ˆë‹¤." },
    { id: 4, actor: "ê°œë°œì", role: "dev", action: "í”¼ë“œë°± ë°˜ì˜ & ì¬í‘¸ì‹œ", cmd: "git push origin feature/dark-mode", icon: "ğŸ”§", color: "#00d4ff", status: "fix",
      explain: "ë¦¬ë·° í”¼ë“œë°±ì„ ë°˜ì˜í•˜ì—¬ ì½”ë“œë¥¼ ìˆ˜ì •í•˜ê³  ë‹¤ì‹œ í‘¸ì‹œí•©ë‹ˆë‹¤. PRì´ ìë™ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë©ë‹ˆë‹¤." },
    { id: 5, actor: "ë¦¬ë·°ì–´", role: "reviewer", action: "Approve ìŠ¹ì¸", cmd: "GitHub â†’ Approve", icon: "âœ…", color: "#22c55e", status: "approved",
      explain: "ë¦¬ë·°ì–´ê°€ ìˆ˜ì •ëœ ì½”ë“œë¥¼ í™•ì¸í•˜ê³  Approveí•©ë‹ˆë‹¤. ì´ì œ mergeí•  ì¤€ë¹„ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤." },
    { id: 6, actor: "ê°œë°œì", role: "dev", action: "PR Merge (Squash)", cmd: "GitHub â†’ Squash and merge", icon: "ğŸ”€", color: "#22c55e", status: "merged",
      explain: "ëª¨ë“  ì»¤ë°‹ì„ í•˜ë‚˜ë¡œ í•©ì³(Squash) mainì— ë³‘í•©í•©ë‹ˆë‹¤. ê¹”ë”í•œ íˆìŠ¤í† ë¦¬ë¥¼ ìœ ì§€í•©ë‹ˆë‹¤." },
    { id: 7, actor: "ì‹œìŠ¤í…œ", role: "ci", action: "CI/CD íŒŒì´í”„ë¼ì¸ â†’ ë°°í¬", cmd: "GitHub Actions â†’ Deploy to production", icon: "ğŸš€", color: "#7c3aed", status: "deploy",
      explain: "main ë¸Œëœì¹˜ì— ë³‘í•©ë˜ë©´ ìë™ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ â†’ ë¹Œë“œ â†’ ë°°í¬ íŒŒì´í”„ë¼ì¸ì´ ì‹¤í–‰ë©ë‹ˆë‹¤." },
  ];

  const REVIEW_COMMENTS = [
    { file: "src/hooks/useDarkMode.js", line: 12, code: "const toggle = () => setDark(!dark);", comment: "í•¨ìˆ˜ëª…ì„ toggleDarkModeë¡œ ë³€ê²½í•˜ë©´ ë” ëª…í™•í•´ìš”.", author: "ê¹€ë¦¬ë·°ì–´", severity: "suggestion", resolved: false },
    { file: "src/components/Header.jsx", line: 45, code: "const theme = useMemo(() => getTheme(mode));", comment: "useMemo ë‘ ë²ˆì§¸ ì¸ìë¡œ [mode]ë¥¼ ë„£ì–´ì•¼ í•©ë‹ˆë‹¤.", author: "ë°•ë¦¬ë·°ì–´", severity: "bug", resolved: false },
    { file: "src/styles/dark.css", line: 8, code: "color: #fff;", comment: "í•˜ë“œì½”ë”© ëŒ€ì‹  CSS ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•´ì£¼ì„¸ìš”.", author: "ê¹€ë¦¬ë·°ì–´", severity: "suggestion", resolved: false },
  ];

  const CI_STAGES = [
    { name: "Lint", icon: "ğŸ”", duration: "12s" },
    { name: "Test", icon: "ğŸ§ª", duration: "45s" },
    { name: "Build", icon: "ğŸ“¦", duration: "1m 23s" },
    { name: "Deploy", icon: "ğŸš€", duration: "38s" },
  ];

  const [currentStep, setCurrentStep] = useState(-1);
  const [log, setLog] = useState([]);
  const [reviews, setReviews] = useState(REVIEW_COMMENTS);
  const [ciProgress, setCiProgress] = useState(-1);
  const logEndRef = useRef(null);

  useEffect(() => { if (logEndRef.current) logEndRef.current.scrollIntoView({ behavior: "smooth" }); }, [log.length]);

  const prStatus = currentStep >= 6 ? "merged" : currentStep >= 2 ? "open" : "none";
  const reviewStatus = currentStep === 3 ? "changes_requested" : currentStep >= 5 ? "approved" : currentStep >= 4 ? "pending" : "none";
  const isDone = currentStep >= STEPS.length - 1;

  const advance = () => {
    const next = currentStep + 1;
    if (next >= STEPS.length) return;
    const s = STEPS[next];
    setCurrentStep(next);

    const newLogs = [];
    if (s.role === "dev") newLogs.push({ type: "cmd", text: s.cmd });
    else if (s.role === "reviewer") newLogs.push({ type: "info", text: `[${s.actor}] ${s.action}` });
    else newLogs.push({ type: "info", text: `[${s.actor}] ${s.action}` });

    // Contextual output per step
    if (s.status === "coding") {
      newLogs.push({ type: "out", text: "Switched to a new branch 'feature/dark-mode'" });
      newLogs.push({ type: "stat", text: "// 3 files changed: useDarkMode.js, Header.jsx, dark.css" });
    } else if (s.status === "pushed") {
      newLogs.push({ type: "out", text: "Enumerating objects: 8, done." });
      newLogs.push({ type: "out", text: "remote: Create a pull request for 'feature/dark-mode':" });
      newLogs.push({ type: "out", text: "remote:   https://github.com/team/project/pull/new/feature/dark-mode" });
    } else if (s.status === "pr_open") {
      newLogs.push({ type: "out", text: "Creating pull request for feature/dark-mode into main" });
      newLogs.push({ type: "out", text: "https://github.com/team/project/pull/42" });
    } else if (s.status === "review") {
      newLogs.push({ type: "warn", text: "Changes requested â€” 3 comments" });
    } else if (s.status === "fix") {
      newLogs.push({ type: "out", text: "Everything up-to-date (2 commits pushed)" });
      setReviews(prev => prev.map(r => ({ ...r, resolved: true })));
    } else if (s.status === "approved") {
      newLogs.push({ type: "out", text: "âœ“ Approved by ê¹€ë¦¬ë·°ì–´, ë°•ë¦¬ë·°ì–´" });
    } else if (s.status === "merged") {
      newLogs.push({ type: "out", text: "Pull request #42 merged (squash)" });
      newLogs.push({ type: "stat", text: " 3 files changed, 247 insertions(+), 12 deletions(-)" });
    } else if (s.status === "deploy") {
      newLogs.push({ type: "out", text: "Workflow 'Deploy to Production' triggered" });
      // Animate CI
      setCiProgress(0);
      CI_STAGES.forEach((_, i) => setTimeout(() => setCiProgress(i + 1), (i + 1) * 800));
    }

    setLog(l => [...l, ...newLogs]);
  };

  const reset = () => { setCurrentStep(-1); setLog([]); setReviews(REVIEW_COMMENTS); setCiProgress(-1); };

  const severityColors = { bug: "#ef4444", suggestion: "#f59e0b" };
  const severityLabels = { bug: "Bug", suggestion: "ì œì•ˆ" };

  return (
    <div style={{ background: "var(--surface2)", borderRadius: 14, overflow: "hidden", border: "1px solid var(--border)" }}>
      {/* Header */}
      <div style={{ padding: "14px 18px", borderBottom: "1px solid var(--border)", display: "flex", alignItems: "center", justifyContent: "space-between", flexWrap: "wrap", gap: 8 }}>
        <div style={{ display: "flex", alignItems: "center", gap: 10 }}>
          <span style={{ fontFamily: "DM Mono,monospace", fontSize: 13, color: "#22c55e" }}>ğŸ‘¥ íŒ€ í˜‘ì—… PR ì›Œí¬í”Œë¡œìš°</span>
          <span style={{ fontSize: 10, color: "var(--text-muted)", fontFamily: "DM Mono,monospace" }}>
            {currentStep < 0 ? "ëŒ€ê¸°" : `Step ${currentStep + 1}/${STEPS.length}`}
          </span>
        </div>
        {prStatus !== "none" && (
          <span style={{ fontSize: 10, fontFamily: "DM Mono,monospace", padding: "3px 10px", borderRadius: 20, animation: "fadeInUp .3s ease",
            background: prStatus === "merged" ? "rgba(124,58,237,0.15)" : "rgba(34,197,94,0.15)",
            color: prStatus === "merged" ? "#a78bfa" : "#22c55e",
            border: `1px solid ${prStatus === "merged" ? "rgba(124,58,237,0.35)" : "rgba(34,197,94,0.35)"}` }}>
            {prStatus === "merged" ? "ğŸŸ£ Merged" : "ğŸŸ¢ Open"} PR #42
          </span>
        )}
      </div>

      <div className="sim-grid">
        {/* Main area */}
        <div style={{ padding: 18, borderRight: "1px solid var(--border)" }}>
          {/* Step explanation banner */}
          {currentStep >= 0 && (
            <div style={{ marginBottom: 14, padding: "10px 14px", borderRadius: 8, animation: "slideDown .3s ease",
              background: `${STEPS[currentStep].color}08`, border: `1px solid ${STEPS[currentStep].color}20`,
              display: "flex", gap: 10, alignItems: "flex-start" }}>
              <span style={{ fontSize: 18 }}>{STEPS[currentStep].icon}</span>
              <div>
                <div style={{ fontFamily: "Syne,sans-serif", fontWeight: 700, fontSize: 12, color: STEPS[currentStep].color, marginBottom: 2 }}>
                  Step {currentStep + 1}: {STEPS[currentStep].action}
                  <span style={{ fontSize: 9, color: "var(--text-muted)", fontWeight: 400, marginLeft: 8, fontFamily: "DM Mono,monospace",
                    padding: "1px 6px", background: "rgba(255,255,255,0.05)", borderRadius: 3 }}>{STEPS[currentStep].actor}</span>
                </div>
                <div style={{ fontSize: 11, color: "var(--text-muted)", lineHeight: 1.6 }}>{STEPS[currentStep].explain}</div>
              </div>
            </div>
          )}

          {/* Steps timeline */}
          <div style={{ position: "relative", paddingLeft: 28 }}>
            <div style={{ position: "absolute", left: 15, top: 12, bottom: 12, width: 2, background: "var(--border)", borderRadius: 1 }} />
            {STEPS.map((s, i) => {
              const active = i === currentStep;
              const passed = i < currentStep;
              const upcoming = i === currentStep + 1;
              return (
                <div key={s.id} style={{ display: "flex", gap: 12, marginBottom: 10, position: "relative",
                  opacity: i > currentStep + 1 ? 0.3 : 1, transition: "all .4s" }}>
                  {/* Timeline node */}
                  <div style={{ position: "absolute", left: -22, top: 8, width: 20, height: 20, borderRadius: "50%", zIndex: 1, transition: "all .4s",
                    background: passed ? s.color : active ? `${s.color}30` : "var(--surface)",
                    border: `2px solid ${passed || active ? s.color : upcoming ? s.color + "50" : "var(--border)"}`,
                    display: "flex", alignItems: "center", justifyContent: "center", fontSize: 9, color: "#fff",
                    boxShadow: active ? `0 0 12px ${s.color}` : "none", animation: active ? "pulse 2s infinite" : "none" }}>
                    {passed ? "âœ“" : ""}
                  </div>
                  {/* Step card */}
                  <div style={{ flex: 1, padding: "8px 12px", borderRadius: 8, transition: "all .35s cubic-bezier(.34,1.2,.64,1)",
                    background: active ? `${s.color}0c` : passed ? "rgba(255,255,255,0.015)" : "transparent",
                    border: `1px solid ${active ? s.color + "40" : passed ? s.color + "18" : "transparent"}` }}>
                    <div style={{ display: "flex", gap: 6, alignItems: "center" }}>
                      <span style={{ fontSize: 14 }}>{s.icon}</span>
                      <span style={{ fontFamily: "Syne,sans-serif", fontWeight: 700, fontSize: 12, color: active || passed ? s.color : "var(--text-muted)" }}>{s.actor}</span>
                      <span style={{ fontSize: 11, color: "var(--text-muted)" }}>{s.action}</span>
                    </div>
                    {(active || passed) && (
                      <code style={{ fontFamily: "DM Mono,monospace", fontSize: 10, color: passed ? `${s.color}99` : s.color,
                        background: active ? `${s.color}0e` : "transparent", padding: "1px 6px", borderRadius: 3, display: "inline-block", marginTop: 3 }}>
                        {s.cmd}
                      </code>
                    )}
                  </div>
                </div>
              );
            })}
          </div>

          {/* PR Panel */}
          {prStatus !== "none" && (
            <div style={{ marginTop: 12, borderRadius: 10, overflow: "hidden", animation: "prBadge .4s cubic-bezier(.34,1.56,.64,1)",
              border: `1px solid ${prStatus === "merged" ? "rgba(124,58,237,0.3)" : "rgba(245,158,11,0.3)"}` }}>
              {/* PR Header */}
              <div style={{ padding: "12px 14px", background: prStatus === "merged" ? "rgba(124,58,237,0.06)" : "rgba(245,158,11,0.06)",
                borderBottom: "1px solid rgba(255,255,255,0.05)" }}>
                <div style={{ display: "flex", gap: 8, alignItems: "center", marginBottom: 6, flexWrap: "wrap" }}>
                  <span style={{ padding: "2px 10px", borderRadius: 20, fontSize: 10, fontFamily: "DM Mono,monospace",
                    background: prStatus === "merged" ? "rgba(124,58,237,0.2)" : "rgba(34,197,94,0.2)",
                    color: prStatus === "merged" ? "#a78bfa" : "#22c55e",
                    border: `1px solid ${prStatus === "merged" ? "rgba(124,58,237,0.4)" : "rgba(34,197,94,0.4)"}` }}>
                    {prStatus === "merged" ? "Merged" : "Open"}
                  </span>
                  <span style={{ fontFamily: "Syne,sans-serif", fontWeight: 700, color: "var(--text)", fontSize: 13 }}>Add dark mode support</span>
                  <span style={{ fontSize: 10, color: "var(--text-muted)" }}>#42</span>
                </div>
                <div style={{ display: "flex", gap: 10, alignItems: "center", flexWrap: "wrap" }}>
                  <span style={{ fontSize: 10, color: "var(--text-muted)", fontFamily: "DM Mono,monospace" }}>feature/dark-mode â†’ main</span>
                  <span style={{ fontSize: 9, padding: "1px 6px", borderRadius: 3, background: "rgba(0,212,255,0.1)", color: "#00d4ff", border: "1px solid rgba(0,212,255,0.25)" }}>3 commits</span>
                  <span style={{ fontSize: 9, color: "#22c55e" }}>+247</span>
                  <span style={{ fontSize: 9, color: "#ef4444" }}>-12</span>
                  {/* Labels */}
                  <span style={{ fontSize: 9, padding: "1px 6px", borderRadius: 3, background: "rgba(124,58,237,0.12)", color: "#a78bfa", border: "1px solid rgba(124,58,237,0.25)" }}>enhancement</span>
                  <span style={{ fontSize: 9, padding: "1px 6px", borderRadius: 3, background: "rgba(0,212,255,0.12)", color: "#00d4ff", border: "1px solid rgba(0,212,255,0.25)" }}>UI</span>
                </div>
                {/* Review status */}
                {reviewStatus !== "none" && (
                  <div style={{ marginTop: 8, display: "flex", gap: 6, alignItems: "center" }}>
                    <span style={{ fontSize: 10, fontFamily: "DM Mono,monospace",
                      color: reviewStatus === "approved" ? "#22c55e" : reviewStatus === "changes_requested" ? "#f97316" : "#f59e0b" }}>
                      {reviewStatus === "approved" ? "âœ“ Approved" : reviewStatus === "changes_requested" ? "âš  Changes requested" : "â— Review pending"}
                    </span>
                    <span style={{ fontSize: 9, color: "var(--text-muted)" }}>by ê¹€ë¦¬ë·°ì–´, ë°•ë¦¬ë·°ì–´</span>
                  </div>
                )}
              </div>

              {/* Review comments */}
              {currentStep >= 3 && currentStep <= 6 && (
                <div style={{ padding: "10px 14px", animation: "slideDown .3s ease", opacity: currentStep >= 6 ? 0.35 : 1, transition: "opacity .5s ease" }}>
                  <div style={{ fontSize: 10, color: "#f97316", fontFamily: "DM Mono,monospace", marginBottom: 8 }}>
                    ğŸ“ ì½”ë“œ ë¦¬ë·° ({reviews.filter(r => !r.resolved).length} open Â· {reviews.filter(r => r.resolved).length} resolved)
                  </div>
                  {reviews.map((rc, i) => (
                    <div key={i} style={{ marginBottom: 8, borderRadius: 6, overflow: "hidden",
                      border: `1px solid ${rc.resolved ? "rgba(34,197,94,0.2)" : "rgba(249,115,22,0.2)"}`,
                      opacity: rc.resolved ? 0.6 : 1, animation: `staggerReveal .3s ease ${i * .08}s both` }}>
                      {/* File + line header */}
                      <div style={{ padding: "4px 10px", background: "rgba(0,0,0,0.2)", display: "flex", alignItems: "center", gap: 6, fontSize: 9, fontFamily: "DM Mono,monospace" }}>
                        <span style={{ color: "var(--text-muted)" }}>{rc.file}</span>
                        <span style={{ color: "#f59e0b" }}>:{rc.line}</span>
                        <span style={{ marginLeft: "auto", padding: "0 5px", borderRadius: 2, fontSize: 8,
                          background: `${severityColors[rc.severity]}15`, color: severityColors[rc.severity],
                          border: `1px solid ${severityColors[rc.severity]}30` }}>{severityLabels[rc.severity]}</span>
                        {rc.resolved && <span style={{ color: "#22c55e", fontSize: 8 }}>âœ“ resolved</span>}
                      </div>
                      {/* Code snippet */}
                      <div style={{ padding: "4px 10px", background: "rgba(0,0,0,0.1)", fontFamily: "DM Mono,monospace", fontSize: 10, color: "var(--text-muted)" }}>
                        <span style={{ color: "#374151", marginRight: 8 }}>{rc.line}</span>{rc.code}
                      </div>
                      {/* Comment */}
                      <div style={{ padding: "6px 10px", display: "flex", gap: 6, alignItems: "flex-start" }}>
                        <div style={{ width: 18, height: 18, borderRadius: "50%", background: "rgba(249,115,22,0.15)", display: "flex", alignItems: "center", justifyContent: "center", fontSize: 8, color: "#f97316", flexShrink: 0, marginTop: 1 }}>
                          {rc.author[0]}
                        </div>
                        <div>
                          <span style={{ fontSize: 10, color: "#f97316", fontFamily: "DM Mono,monospace" }}>{rc.author}</span>
                          <div style={{ fontSize: 11, color: "var(--text-muted)", lineHeight: 1.5 }}>{rc.comment}</div>
                        </div>
                      </div>
                    </div>
                  ))}
                </div>
              )}

              {/* CI/CD Pipeline */}
              {currentStep >= 7 && (
                <div style={{ padding: "10px 14px", borderTop: "1px solid rgba(255,255,255,0.05)", animation: "slideDown .3s ease" }}>
                  <div style={{ fontSize: 10, color: "#7c3aed", fontFamily: "DM Mono,monospace", marginBottom: 10 }}>âš¡ CI/CD Pipeline</div>
                  <div style={{ display: "flex", gap: 0, alignItems: "center" }}>
                    {CI_STAGES.map((stage, i) => {
                      const passed = ciProgress > i;
                      const running = ciProgress === i;
                      return (
                        <React.Fragment key={i}>
                          <div style={{ flex: 1, textAlign: "center" }}>
                            <div style={{ padding: "8px 4px", borderRadius: 6, transition: "all .5s",
                              background: passed ? "rgba(34,197,94,0.1)" : running ? "rgba(124,58,237,0.1)" : "rgba(0,0,0,0.15)",
                              border: `1px solid ${passed ? "rgba(34,197,94,0.3)" : running ? "rgba(124,58,237,0.4)" : "var(--border)"}`,
                              boxShadow: running ? "0 0 10px rgba(124,58,237,0.3)" : "none", animation: running ? "pulse 1.5s infinite" : "none" }}>
                              <div style={{ fontSize: 14, marginBottom: 3 }}>{stage.icon}</div>
                              <div style={{ fontSize: 9, fontFamily: "DM Mono,monospace", color: passed ? "#22c55e" : running ? "#a78bfa" : "var(--text-muted)" }}>{stage.name}</div>
                              <div style={{ fontSize: 8, color: "var(--text-muted)", marginTop: 2 }}>{stage.duration}</div>
                              {passed && <div style={{ fontSize: 9, color: "#22c55e", marginTop: 2 }}>âœ“</div>}
                              {running && <div style={{ fontSize: 8, color: "#a78bfa", marginTop: 2, animation: "blink 1s infinite" }}>running...</div>}
                            </div>
                          </div>
                          {i < CI_STAGES.length - 1 && (
                            <div style={{ fontSize: 12, color: passed ? "#22c55e" : "var(--border)", padding: "0 4px", flexShrink: 0, transition: "color .5s" }}>â†’</div>
                          )}
                        </React.Fragment>
                      );
                    })}
                  </div>
                </div>
              )}
            </div>
          )}

          {/* Deploy complete */}
          {isDone && ciProgress >= CI_STAGES.length && (
            <div style={{ marginTop: 14, padding: "14px 16px", background: "rgba(34,197,94,0.08)", border: "1px solid rgba(34,197,94,0.25)", borderRadius: 10, animation: "successPop .5s cubic-bezier(.34,1.56,.64,1)" }}>
              <div style={{ fontFamily: "Syne,sans-serif", fontWeight: 800, color: "#22c55e", fontSize: 16, marginBottom: 6 }}>ğŸš€ Production ë°°í¬ ì™„ë£Œ!</div>
              <div style={{ fontSize: 11, color: "var(--text-muted)", lineHeight: 1.7 }}>
                feature/dark-mode â†’ main ë³‘í•© â†’ CI í†µê³¼ â†’ ìë™ ë°°í¬ ì™„ë£Œ<br />
                <span style={{ color: "#a78bfa" }}>ì „ì²´ íŒŒì´í”„ë¼ì¸: ë¸Œëœì¹˜ ìƒì„± â†’ ì½”ë”© â†’ PR â†’ ë¦¬ë·° â†’ ìˆ˜ì • â†’ ìŠ¹ì¸ â†’ Merge â†’ ë°°í¬</span>
              </div>
            </div>
          )}

          {/* Controls */}
          <div style={{ display: "flex", gap: 8, marginTop: 16, alignItems: "center" }}>
            <button className="sim-btn" onClick={advance} disabled={isDone}
              style={currentStep < 0 ? { animation: "pulse 2s infinite" } : {}}>
              {currentStep < 0 ? "â–¶ ì›Œí¬í”Œë¡œìš° ì‹œì‘" : isDone ? "âœ“ ì „ì²´ ì™„ë£Œ" : `â–¶ ${STEPS[currentStep + 1]?.action || ""}`}
            </button>
            <button className="ghost-btn" onClick={reset}>â†º ì´ˆê¸°í™”</button>
            {currentStep >= 0 && <span style={{ fontSize: 10, color: "var(--text-muted)", fontFamily: "DM Mono,monospace" }}>{currentStep + 1}/{STEPS.length}</span>}
          </div>

          {/* Progress */}
          <div style={{ marginTop: 12 }}>
            <div style={{ display: "flex", gap: 3 }}>
              {STEPS.map((s, i) => (
                <div key={i} style={{ flex: 1, height: 5, borderRadius: 3, transition: "all .4s ease",
                  background: i <= currentStep ? s.color : "var(--border)",
                  boxShadow: i === currentStep ? `0 0 8px ${s.color}` : "none" }} />
              ))}
            </div>
            <div style={{ display: "flex", gap: 3, marginTop: 4 }}>
              {STEPS.map((s, i) => (
                <div key={i} style={{ flex: 1, fontSize: 7, textAlign: "center", fontFamily: "DM Mono,monospace",
                  color: i <= currentStep ? s.color : "var(--text-muted)", transition: "color .3s" }}>
                  {i <= currentStep ? "âœ“" : s.icon}
                </div>
              ))}
            </div>
          </div>
        </div>

        {/* Activity Log */}
        <div style={{ background: "#0d1117", fontFamily: "DM Mono,monospace", fontSize: 11, display: "flex", flexDirection: "column" }}>
          <div style={{ padding: "8px 14px", borderBottom: "1px solid #1e2d45", display: "flex", alignItems: "center", gap: 6, flexShrink: 0 }}>
            <div style={{ width: 8, height: 8, borderRadius: "50%", background: "#ef4444" }} />
            <div style={{ width: 8, height: 8, borderRadius: "50%", background: "#f59e0b" }} />
            <div style={{ width: 8, height: 8, borderRadius: "50%", background: "#22c55e" }} />
            <span style={{ flex: 1, textAlign: "center", fontSize: 9, color: "#374151" }}>Activity Log</span>
          </div>
          <div style={{ padding: 14, flex: 1, overflowY: "auto", maxHeight: 400 }}>
            {log.length === 0 && <div style={{ color: "var(--text-muted)", animation: "pulse 2s infinite" }}>â–¶ ì‹œì‘ ë²„íŠ¼ì„ ëˆ„ë¥´ì„¸ìš”...</div>}
            {log.map((l, i) => (
              <div key={i} style={{ lineHeight: 1.8, animation: "fadeInLeft .2s ease",
                color: l.type === "cmd" ? "var(--accent)" : l.type === "out" ? "#22c55e" : l.type === "stat" ? "#f59e0b"
                  : l.type === "info" ? "#a78bfa" : l.type === "warn" ? "#f97316" : "#64748b",
                paddingLeft: l.type === "stat" ? 4 : 0 }}>
                {l.type === "cmd" && <><span style={{ color: "#7c3aed" }}>â¯ </span>{l.text}</>}
                {l.type === "out" && l.text}
                {l.type === "stat" && <span style={{ opacity: 0.7 }}>{l.text}</span>}
                {l.type === "info" && l.text}
                {l.type === "warn" && l.text}
              </div>
            ))}
            <div ref={logEndRef} />
          </div>
        </div>
      </div>
    </div>
  );
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   OTHER COMPONENTS (reused from v1)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function VCSCompare() {
  const [flip, setFlip] = useState({});
  return (
    <div style={{ display: "grid", gridTemplateColumns: "1fr 1fr", gap: 14 }}>
      {[
        { id: "c", type: "ì¤‘ì•™ ì§‘ì¤‘í˜•", ex: "SVN, TFS", pros: ["ë‹¨ìˆœí•œ êµ¬ì¡°", "ì¤‘ì•™ ê´€ë¦¬ ìš©ì´"], cons: ["ì„œë²„ ì¥ì•  ì‹œ í˜‘ì—… ë¶ˆê°€", "ë„¤íŠ¸ì›Œí¬ í•„ìˆ˜"], color: "#ef4444", icon: "ğŸ›ï¸" },
        { id: "d", type: "ë¶„ì‚°í˜•", ex: "Git, Mercurial", pros: ["ì˜¤í”„ë¼ì¸ ì‘ì—… ê°€ëŠ¥", "ì „ì²´ íˆìŠ¤í† ë¦¬ ë¡œì»¬ ë³´ìœ "], cons: ["ì´ˆê¸° í•™ìŠµ ê³¡ì„ "], color: "#22c55e", icon: "ğŸŒ" },
      ].map(item => (
        <div key={item.id} onClick={() => setFlip(f => ({ ...f, [item.id]: !f[item.id] }))} style={{ perspective: 800, cursor: "pointer", height: 180 }}>
          <div style={{ position: "relative", transformStyle: "preserve-3d", transform: flip[item.id] ? "rotateY(180deg)" : "none", transition: "transform .6s cubic-bezier(.34,1.2,.64,1)", height: "100%" }}>
            <div style={{ backfaceVisibility: "hidden", WebkitBackfaceVisibility: "hidden", background: "var(--surface2)", border: `2px solid ${item.color}35`, borderRadius: 12, padding: 18, textAlign: "center", position: "absolute", width: "100%", height: "100%", display: "flex", flexDirection: "column", alignItems: "center", justifyContent: "center", gap: 6 }}>
              <div style={{ fontSize: 36 }}>{item.icon}</div>
              <div style={{ fontFamily: "Syne,sans-serif", fontWeight: 700, color: item.color, fontSize: 14 }}>{item.type}</div>
              <div style={{ fontSize: 11, color: "var(--text-muted)", fontFamily: "DM Mono,monospace" }}>{item.ex}</div>
              <div style={{ fontSize: 10, color: "var(--text-muted)" }}>í´ë¦­í•˜ì—¬ ìƒì„¸ ë³´ê¸°</div>
            </div>
            <div style={{ backfaceVisibility: "hidden", WebkitBackfaceVisibility: "hidden", transform: "rotateY(180deg)", background: `${item.color}0e`, border: `2px solid ${item.color}50`, borderRadius: 12, padding: 16, position: "absolute", width: "100%", height: "100%" }}>
              <div style={{ fontFamily: "Syne,sans-serif", fontWeight: 700, color: item.color, marginBottom: 10, fontSize: 13 }}>{item.type}</div>
              <div style={{ marginBottom: 8 }}>
                {item.pros.map((p, i) => <div key={i} style={{ fontSize: 12, color: "#22c55e", marginBottom: 3 }}>âœ“ {p}</div>)}
              </div>
              {item.cons.map((c, i) => <div key={i} style={{ fontSize: 12, color: "#ef4444", marginBottom: 3 }}>âœ— {c}</div>)}
            </div>
          </div>
        </div>
      ))}
    </div>
  );
}

function ArchDiagram() {
  const [active, setActive] = useState(null);
  const [flowStep, setFlowStep] = useState(-1);
  const zones = [
    { id: 0, label: "Working Directory", sub: "ì‹¤ì œ íŒŒì¼ ìˆ˜ì • ê³µê°„", color: "#f97316", icon: "ğŸ“", cmd: "git add" },
    { id: 1, label: "Staging Area", sub: "Index / ìŠ¤ëƒ…ìƒ· ì¤€ë¹„", color: "#f59e0b", icon: "ğŸ“‹", cmd: "git commit" },
    { id: 2, label: "Repository", sub: ".git ì˜êµ¬ ì €ì¥ì†Œ", color: "#22c55e", icon: "ğŸ—„ï¸", cmd: "git push" },
  ];
  const runFlow = () => {
    setFlowStep(-1); let s = 0;
    const iv = setInterval(() => { setFlowStep(s++); if (s > 3) { clearInterval(iv); setTimeout(() => setFlowStep(-1), 1500); } }, 900);
  };
  return (
    <div>
      <div style={{ display: "flex", alignItems: "center", justifyContent: "center", gap: 0, flexWrap: "wrap", padding: "12px 0" }}>
        {zones.map((z, i) => (
          <div key={z.id} style={{ display: "flex", alignItems: "center" }}>
            <div onMouseEnter={() => setActive(z.id)} onMouseLeave={() => setActive(null)} style={{ width: 148, padding: "18px 12px", textAlign: "center", background: active === z.id || flowStep >= z.id ? `${z.color}18` : "var(--surface2)", border: `2px solid ${active === z.id || flowStep >= z.id ? z.color : z.color + "35"}`, borderRadius: 14, transition: "all .4s cubic-bezier(.34,1.56,.64,1)", transform: active === z.id ? "scale(1.06) translateY(-3px)" : "none", boxShadow: flowStep >= z.id ? `0 0 20px ${z.color}45` : "none", cursor: "pointer" }}>
              <div style={{ fontSize: 28, marginBottom: 6, animation: active === z.id ? "bounce .5s" : "none" }}>{z.icon}</div>
              <div style={{ fontFamily: "Syne,sans-serif", fontWeight: 700, fontSize: 12, color: "var(--text)", marginBottom: 3 }}>{z.label}</div>
              <div style={{ fontSize: 10, color: "var(--text-muted)" }}>{z.sub}</div>
            </div>
            {i < zones.length - 1 && (
              <div style={{ display: "flex", flexDirection: "column", alignItems: "center", margin: "0 6px" }}>
                <div style={{ fontSize: 10, fontFamily: "DM Mono,monospace", color: flowStep > i ? zones[i].color : "var(--text-muted)", padding: "2px 7px", borderRadius: 3, background: flowStep > i ? `${zones[i].color}15` : "transparent", transition: "all .3s", marginBottom: 3 }}>{zones[i].cmd}</div>
                <div style={{ fontSize: 22, color: flowStep > i ? zones[i].color : "var(--border)", transition: "color .3s", animation: flowStep === i ? "bounce .5s" : "none" }}>â†’</div>
              </div>
            )}
          </div>
        ))}
      </div>
      <div style={{ textAlign: "center", marginTop: 14 }}>
        <button className="sim-btn" onClick={runFlow}>â–¶ íë¦„ ì‹œë®¬ë ˆì´ì…˜</button>
      </div>
    </div>
  );
}

function StatusVisualizer() {
  const [files, setFiles] = useState([
    { name: "index.html", status: "untracked" },
    { name: "style.css", status: "untracked" },
    { name: "app.js", status: "untracked" },
  ]);
  const [staged, setStaged] = useState([]);
  const [committed, setCommitted] = useState([]);
  const [msg, setMsg] = useState("Initial commit");
  const statusColors = { untracked: { color: "#ef4444", label: "??" }, modified: { color: "#f59e0b", label: "M" }, staged: { color: "#22c55e", label: "A" } };
  const stageFile = (f) => { setFiles(p => p.filter(x => x.name !== f.name)); setStaged(p => [...p, { ...f, status: "staged" }]); };
  const commit = () => { if (!staged.length) return; setCommitted(p => [...p, ...staged]); setStaged([]); };
  const reset = () => { setFiles([{ name: "index.html", status: "untracked" }, { name: "style.css", status: "untracked" }, { name: "app.js", status: "untracked" }]); setStaged([]); setCommitted([]); };
  const ZoneBox = ({ title, color, fls, action, actionLabel, emptyText }) => (
    <div style={{ background: "var(--surface2)", border: `1px solid ${color}25`, borderRadius: 10, padding: 14, flex: 1, minWidth: 140 }}>
      <div style={{ fontFamily: "DM Mono,monospace", fontSize: 10, color, marginBottom: 10, letterSpacing: 1, display: "flex", alignItems: "center", gap: 5 }}>
        <div style={{ width: 7, height: 7, borderRadius: "50%", background: color, animation: "pulse 2s infinite" }} />{title}
      </div>
      {fls.length === 0 ? <div style={{ fontSize: 11, color: "var(--text-muted)", textAlign: "center", padding: "8px 0" }}>{emptyText}</div> : fls.map((f, i) => {
        const sc = statusColors[f.status];
        return (
          <div key={f.name} style={{ display: "flex", alignItems: "center", gap: 6, padding: "5px 8px", marginBottom: 3, borderRadius: 5, background: `${sc.color}0e`, animation: `staggerReveal .3s ease ${i * .05}s both` }}>
            <span style={{ width: 18, height: 18, borderRadius: 3, background: `${sc.color}25`, color: sc.color, fontSize: 9, fontFamily: "DM Mono,monospace", display: "flex", alignItems: "center", justifyContent: "center", flexShrink: 0 }}>{sc.label}</span>
            <span style={{ fontSize: 11, color: "var(--text)", flex: 1 }}>{f.name}</span>
            {action && <button onClick={() => action(f)} style={{ background: `${color}18`, border: `1px solid ${color}35`, color, fontSize: 9, padding: "2px 7px", borderRadius: 3, cursor: "pointer", fontFamily: "DM Mono,monospace" }} onMouseEnter={e => e.target.style.background = `${color}35`} onMouseLeave={e => e.target.style.background = `${color}18`}>{actionLabel}</button>}
          </div>
        );
      })}
    </div>
  );
  return (
    <div>
      <div style={{ display: "flex", gap: 10, flexWrap: "wrap", alignItems: "stretch" }}>
        <ZoneBox title="Working Directory" color="#f97316" fls={files} action={stageFile} actionLabel="add" emptyText="íŒŒì¼ ì—†ìŒ" />
        <div style={{ display: "flex", alignItems: "center", color: "#f59e0b", fontSize: 20 }}>â†’</div>
        <ZoneBox title="Staging Area" color="#f59e0b" fls={staged} action={null} emptyText="staged ì—†ìŒ" />
        <div style={{ display: "flex", alignItems: "center", color: "#22c55e", fontSize: 20 }}>â†’</div>
        <ZoneBox title="Repository" color="#22c55e" fls={committed} action={null} emptyText="ì»¤ë°‹ ì—†ìŒ" />
      </div>
      <div style={{ display: "flex", gap: 8, marginTop: 12 }}>
        <button className="sim-btn" onClick={commit} disabled={!staged.length}>git commit</button>
        <button className="ghost-btn" onClick={reset}>ì´ˆê¸°í™”</button>
      </div>
    </div>
  );
}

function Terminal({ commands }) {
  const [lines, setLines] = useState([]); const [running, setRunning] = useState(false);
  const runDemo = async () => {
    if (running) return; setRunning(true); setLines([]);
    for (const cmd of commands) {
      await new Promise(r => setTimeout(r, 600));
      setLines(l => [...l, { type: "cmd", text: cmd.cmd }]);
      if (cmd.output) { await new Promise(r => setTimeout(r, 400)); setLines(l => [...l, { type: "out", text: cmd.output }]); }
    }
    setRunning(false);
  };
  return (
    <div style={{ borderRadius: 10, overflow: "hidden", border: "1px solid var(--border)" }}>
      <div style={{ background: "#1e1e2e", padding: "9px 14px", display: "flex", alignItems: "center", gap: 7 }}>
        <div style={{ width: 11, height: 11, borderRadius: "50%", background: "#ef4444" }} />
        <div style={{ width: 11, height: 11, borderRadius: "50%", background: "#f59e0b" }} />
        <div style={{ width: 11, height: 11, borderRadius: "50%", background: "#22c55e" }} />
        <span style={{ flex: 1, textAlign: "center", fontSize: 11, color: "var(--text-muted)", fontFamily: "DM Mono,monospace" }}>bash</span>
        <button onClick={runDemo} disabled={running} style={{ background: running ? "var(--border)" : "var(--accent)", border: "none", color: running ? "var(--text-muted)" : "#000", padding: "3px 12px", borderRadius: 5, fontSize: 10, fontFamily: "DM Mono,monospace", cursor: running ? "default" : "pointer" }}>
          {running ? "ì‹¤í–‰ì¤‘..." : "â–¶ ì‹¤í–‰"}
        </button>
      </div>
      <div style={{ background: "#0d1117", padding: 14, minHeight: 140, fontFamily: "DM Mono,monospace", fontSize: 12, lineHeight: 1.9 }}>
        {lines.length === 0 && <div style={{ color: "var(--text-muted)", animation: "pulse 2s infinite" }}>â–¶ ì‹¤í–‰ ë²„íŠ¼ì„ ëˆŒëŸ¬ ë°ëª¨ë¥¼ ì‹œì‘í•˜ì„¸ìš”...</div>}
        {lines.map((l, i) => (
          <div key={i} style={{ color: l.type === "cmd" ? "var(--accent)" : "#64748b", animation: "fadeInUp .25s ease" }}>
            {l.type === "cmd" ? <><span style={{ color: "#7c3aed" }}>~/project</span><span style={{ color: "#374151" }}> $ </span>{l.text}</> : l.text}
          </div>
        ))}
        {running && <span style={{ color: "var(--text-muted)", animation: "blink .8s infinite" }}>â–ˆ</span>}
      </div>
    </div>
  );
}

function DiffViewer() {
  return (
    <div style={{ borderRadius: 8, overflow: "hidden", border: "1px solid var(--border)", fontFamily: "DM Mono,monospace", fontSize: 12 }}>
      <div style={{ background: "#1e1e2e", padding: "7px 14px", fontSize: 10, color: "var(--text-muted)" }}>git diff â€” app.js</div>
      {[
        { type: "ctx", line: '  function greet(name) {' },
        { type: "del", line: '-   console.log("Hello " + name);' },
        { type: "add", line: '+   console.log(`Hello, ${name}!`);' },
        { type: "ctx", line: '  }' },
      ].map((l, i) => (
        <div key={i} style={{ padding: "2px 14px", background: l.type === "del" ? "rgba(239,68,68,0.14)" : l.type === "add" ? "rgba(34,197,94,0.14)" : "transparent", color: l.type === "del" ? "#ef4444" : l.type === "add" ? "#22c55e" : "var(--text-muted)", animation: `fadeInLeft .3s ease ${i * .08}s both` }}>{l.line}</div>
      ))}
    </div>
  );
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MAIN APP
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function GitLecture() {
  const [tab, setTab] = useState("beginner");
  const [simTab, setSimTab] = useState("branch");
  const [visitedTabs, setVisitedTabs] = useState(new Set(["beginner"]));
  const [visitedSims, setVisitedSims] = useState(new Set());

  useEffect(() => { setVisitedTabs(prev => { const next = new Set(prev); next.add(tab); return next; }); }, [tab]);
  useEffect(() => { if (tab === "simulations") setVisitedSims(prev => { const next = new Set(prev); next.add(simTab); return next; }); }, [simTab, tab]);

  const tabs = [
    { id: "beginner", label: "ğŸŸ¢ ì´ˆê¸‰", color: "#22c55e" },
    { id: "intermediate", label: "ğŸŸ¡ ì¤‘ê¸‰", color: "#f59e0b" },
    { id: "advanced", label: "ğŸ”´ ê³ ê¸‰", color: "#ef4444" },
    { id: "simulations", label: "âš¡ ì‹œë®¬ë ˆì´ì…˜", color: "#00d4ff" },
  ];

  const simTabs = [
    { id: "branch", label: "ğŸŒ¿ Branch & Merge", color: "#00d4ff" },
    { id: "conflict", label: "âš”ï¸ Merge Conflict", color: "#ef4444" },
    { id: "reset", label: "âª Git Reset", color: "#f97316" },
    { id: "pr", label: "ğŸ‘¥ PR ì›Œí¬í”Œë¡œìš°", color: "#22c55e" },
  ];

  return (
    <div style={{ minHeight: "100vh", background: "var(--bg)", color: "var(--text)", fontFamily: "Syne,sans-serif", overflowX: "hidden" }}>
      <style>{css}</style>

      {/* BG */}
      <div style={{ position: "fixed", inset: 0, pointerEvents: "none", zIndex: 0, overflow: "hidden" }}>
        <div style={{ position: "absolute", inset: 0, backgroundImage: "linear-gradient(rgba(0,212,255,0.025) 1px,transparent 1px),linear-gradient(90deg,rgba(0,212,255,0.025) 1px,transparent 1px)", backgroundSize: "40px 40px", animation: "gridMove 5s linear infinite" }} />
        {[{ top: "8%", left: "10%", size: 320, color: "#00d4ff", d: 0 }, { top: "55%", right: "5%", size: 260, color: "#7c3aed", d: 3 }, { top: "35%", left: "45%", size: 200, color: "#f59e0b", d: 6 }].map((o, i) => (
          <div key={i} style={{ position: "absolute", ...o, width: o.size, height: o.size, borderRadius: "50%", background: `radial-gradient(circle,${o.color}07 0%,transparent 70%)`, animation: `orbFloat ${8 + i * 2}s ease-in-out ${o.d}s infinite`, filter: "blur(18px)" }} />
        ))}
        <div style={{ position: "absolute", left: 0, right: 0, height: 2, background: "linear-gradient(90deg,transparent,rgba(0,212,255,0.09),transparent)", animation: "scanline 9s linear infinite" }} />
      </div>

      <div style={{ position: "relative", zIndex: 1 }}>
        {/* HERO â€” compact */}
        <div style={{ display: "flex", flexDirection: "column", alignItems: "center", justifyContent: "center", padding: "48px 24px 36px", textAlign: "center" }}>
          <div style={{ display: "inline-flex", alignItems: "center", gap: 8, background: "rgba(0,212,255,0.07)", border: "1px solid rgba(0,212,255,0.18)", padding: "5px 18px", borderRadius: 30, marginBottom: 20, animation: "fadeInUp .7s ease .2s both" }}>
            <div style={{ width: 7, height: 7, borderRadius: "50%", background: "#22c55e", animation: "pulse 2s infinite" }} />
            <span style={{ fontSize: 11, color: "var(--accent)", fontFamily: "DM Mono,monospace", letterSpacing: 2 }}>VERSION CONTROL SYSTEM</span>
          </div>
          <h1 style={{ fontSize: "clamp(36px,8vw,64px)", fontWeight: 800, lineHeight: 1.1, marginBottom: 14, animation: "fadeInUp .7s ease .35s both" }}>
            <span style={{ background: "linear-gradient(135deg,#fff,#94a3b8)", WebkitBackgroundClip: "text", WebkitTextFillColor: "transparent" }}>Master </span>
            <span style={{ background: "linear-gradient(135deg,#00d4ff,#7c3aed)", WebkitBackgroundClip: "text", WebkitTextFillColor: "transparent" }}>Git</span>
          </h1>
          <p style={{ fontSize: "clamp(13px,2vw,16px)", color: "var(--text-muted)", marginBottom: 24, maxWidth: 500, lineHeight: 1.7, animation: "fadeInUp .7s ease .5s both" }}>
            <Typewriter texts={["ì½”ë“œì˜ ì—­ì‚¬ë¥¼ ê¸°ë¡í•˜ë¼", "íŒ€ê³¼ í•¨ê»˜ í˜‘ì—…í•˜ë¼", "ì‹¤ìˆ˜ë¥¼ ë‘ë ¤ì›Œí•˜ì§€ ë§ˆë¼", "git commit -m 'Begin your journey'"]} />
          </p>
          <div style={{ display: "flex", gap: 28, flexWrap: "wrap", justifyContent: "center", animation: "fadeInUp .7s ease .65s both" }}>
            {[{ n: "4", l: "ëª¨ë“ˆ", c: "var(--accent)" }, { n: "4", l: "ì‹œë®¬ë ˆì´ì…˜", c: "#7c3aed" }, { n: "30+", l: "ëª…ë ¹ì–´", c: "#f59e0b" }, { n: "3", l: "ë ˆë²¨", c: "#22c55e" }].map((s, i) => (
              <div key={i} style={{ textAlign: "center" }}>
                <div style={{ fontSize: 28, fontWeight: 800, color: s.c, fontFamily: "DM Mono,monospace" }}>{s.n}</div>
                <div style={{ fontSize: 10, color: "var(--text-muted)", letterSpacing: 2 }}>{s.l}</div>
              </div>
            ))}
          </div>
        </div>

        {/* CONTENT */}
        <div style={{ maxWidth: 980, margin: "0 auto", padding: "0 22px 80px" }}>

          {/* Tab nav */}
          <Reveal>
            <div style={{ display: "flex", gap: 0, background: "var(--surface)", border: "1px solid var(--border)", borderRadius: 12, padding: 4, marginBottom: 44 }}>
              {tabs.map(t => (
                <button key={t.id} onClick={() => setTab(t.id)} style={{ flex: 1, padding: "11px 10px", background: tab === t.id ? `linear-gradient(135deg,${t.color}18,${t.color}0a)` : "transparent", border: tab === t.id ? `1px solid ${t.color}35` : "1px solid transparent", borderRadius: 8, color: tab === t.id ? t.color : "var(--text-muted)", fontFamily: "Syne,sans-serif", fontWeight: 600, fontSize: 13, cursor: "pointer", transition: "all .3s cubic-bezier(.34,1.56,.64,1)", transform: tab === t.id ? "scale(1.02)" : "none", boxShadow: tab === t.id ? `0 0 16px ${t.color}18` : "none" }}>
                  {t.label}
                </button>
              ))}
            </div>
          </Reveal>

          {/* â”€â”€ BEGINNER â”€â”€ */}
          {tab === "beginner" && (
            <div style={{ animation: "zoomIn .35s ease" }}>
              <Reveal><h2 style={{ fontSize: 30, fontWeight: 800, marginBottom: 6, color: "#22c55e" }}>ğŸŸ¢ ì´ˆê¸‰: VCS & Git ê¸°ì´ˆ</h2><p style={{ color: "var(--text-muted)", fontSize: 14, marginBottom: 28 }}>ë²„ì „ ê´€ë¦¬ ì‹œìŠ¤í…œì˜ ê°œë…ì„ ì´í•´í•˜ê³  Gitì˜ ê¸°ë³¸ ì›Œí¬í”Œë¡œìš°ë¥¼ ìµí™ë‹ˆë‹¤.</p></Reveal>
              <div style={{ display: "flex", flexDirection: "column", gap: 14 }}>
                <ModuleCard module="VCSë€ ë¬´ì—‡ì¸ê°€?" index={0} color="green" icon="ğŸ“š">
                  <div style={{ display: "flex", flexDirection: "column", gap: 18 }}>
                    <div style={{ background: "rgba(0,0,0,.3)", border: "1px solid rgba(0,212,255,.12)", borderRadius: 9, padding: 14 }}>
                      <div style={{ fontSize: 12, color: "var(--text-muted)", fontFamily: "DM Mono,monospace", marginBottom: 6 }}>ì •ì˜</div>
                      <p style={{ fontSize: 13, lineHeight: 1.8, color: "var(--text)" }}>ì½”ë“œì˜ ë³€ê²½ ì‚¬í•­ì„ ê¸°ë¡í•˜ëŠ” íŠ¹ìˆ˜ ë°ì´í„°ë² ì´ìŠ¤(Repository)ì…ë‹ˆë‹¤. í”„ë¡œì íŠ¸ íˆìŠ¤í† ë¦¬ ì¶”ì , ì‹¤ìˆ˜ ì‹œ ë³µêµ¬, íŒ€ì› ê°„ì˜ í˜‘ì—…(Merge)ì„ ìš©ì´í•˜ê²Œ í•©ë‹ˆë‹¤.</p>
                    </div>
                    <div><div style={{ fontFamily: "DM Mono,monospace", fontSize: 11, color: "var(--accent)", marginBottom: 10, letterSpacing: 1 }}>VCS ìœ í˜• ë¹„êµ (ì¹´ë“œ í´ë¦­)</div><VCSCompare /></div>
                  </div>
                </ModuleCard>
                <ModuleCard module="Git ì´ˆê¸° ì„¤ì •" index={1} color="green" icon="âš™ï¸">
                  <div style={{ display: "flex", flexDirection: "column", gap: 10 }}>
                    <div style={{ display: "grid", gridTemplateColumns: "repeat(3,1fr)", gap: 8, marginBottom: 6 }}>
                      {[{ s: "system", d: "ì „ì²´ ì‚¬ìš©ì", icon: "ğŸ–¥ï¸" }, { s: "global", d: "í˜„ì¬ ì‚¬ìš©ì", icon: "ğŸ‘¤", hi: true }, { s: "local", d: "í˜„ì¬ í”„ë¡œì íŠ¸", icon: "ğŸ“" }].map((item, i) => (
                        <div key={i} style={{ background: item.hi ? "rgba(0,212,255,0.07)" : "var(--surface2)", border: `1px solid ${item.hi ? "rgba(0,212,255,0.25)" : "var(--border)"}`, borderRadius: 9, padding: 12, textAlign: "center" }}>
                          <div style={{ fontSize: 22, marginBottom: 5 }}>{item.icon}</div>
                          <div style={{ fontFamily: "DM Mono,monospace", fontSize: 11, color: item.hi ? "var(--accent)" : "var(--text)", marginBottom: 3 }}>--{item.s}</div>
                          <div style={{ fontSize: 10, color: "var(--text-muted)" }}>{item.d}</div>
                        </div>
                      ))}
                    </div>
                    <CmdBadge cmd='git config --global user.name "ì´ë¦„"' desc="ì‚¬ìš©ì ì´ë¦„ ì„¤ì •" color="#22c55e" />
                    <CmdBadge cmd='git config --global user.email "ì´ë©”ì¼"' desc="ì´ë©”ì¼ ì„¤ì •" color="#22c55e" />
                    <CmdBadge cmd='git config --global core.editor "code --wait"' desc="VS Code ê¸°ë³¸ ì—ë””í„° ì„¤ì •" color="#22c55e" />
                    <CmdBadge cmd='git config --global core.autocrlf true' desc="Windows ì¤„ë°”ê¿ˆ ì„¤ì •" color="#22c55e" />
                    <CmdBadge cmd='git config --global -e' desc="ì„¤ì • íŒŒì¼ì„ ì—ë””í„°ë¡œ ì—´ê¸°" color="#22c55e" />
                  </div>
                </ModuleCard>
                <ModuleCard module="Git 3ë‹¨ê³„ ì•„í‚¤í…ì²˜" index={2} color="green" icon="ğŸ—ï¸">
                  <div style={{ display: "flex", flexDirection: "column", gap: 18 }}>
                    <div style={{ display: "grid", gridTemplateColumns: "repeat(3,1fr)", gap: 10 }}>
                      {[{ n: "Working Directory", d: "ì‹¤ì œ íŒŒì¼ì„ ìˆ˜ì •í•˜ëŠ” ë¡œì»¬ í´ë”", c: "#f97316", icon: "ğŸ“" }, { n: "Staging Area", d: "ë‹¤ìŒ ì»¤ë°‹ì— í¬í•¨ë  ë³€ê²½ ì‚¬í•­ (Index)", c: "#f59e0b", icon: "ğŸ“‹" }, { n: "Repository", d: "ì»¤ë°‹ëœ ë°ì´í„°ê°€ ì˜êµ¬ ì €ì¥ë˜ëŠ” DB", c: "#22c55e", icon: "ğŸ—„ï¸" }].map((z, i) => (
                        <div key={i} style={{ background: `${z.c}0d`, border: `1px solid ${z.c}28`, borderRadius: 10, padding: 14, textAlign: "center" }}>
                          <div style={{ fontSize: 26, marginBottom: 6 }}>{z.icon}</div>
                          <div style={{ fontFamily: "Syne,sans-serif", fontWeight: 700, fontSize: 11, color: z.c, marginBottom: 4 }}>{z.n}</div>
                          <div style={{ fontSize: 10, color: "var(--text-muted)", lineHeight: 1.5 }}>{z.d}</div>
                        </div>
                      ))}
                    </div>
                    <ArchDiagram />
                    <div><div style={{ fontFamily: "DM Mono,monospace", fontSize: 10, color: "var(--text-muted)", marginBottom: 10, letterSpacing: 1 }}>íŒŒì¼ ìŠ¤í…Œì´ì§• ì‹œë®¬ë ˆì´í„°</div><StatusVisualizer /></div>
                  </div>
                </ModuleCard>
                <ModuleCard module="ê¸°ë³¸ ëª…ë ¹ì–´ ì‹¤ìŠµ" index={3} color="green" icon="âŒ¨ï¸">
                  <div style={{ display: "flex", flexDirection: "column", gap: 10 }}>
                    <CmdBadge cmd="git init" desc="ìƒˆ ì €ì¥ì†Œ ì´ˆê¸°í™” (.git ìƒì„±)" color="#22c55e" />
                    <CmdBadge cmd="git add <file>" desc="íŒŒì¼ì„ Staging Areaë¡œ ì´ë™" color="#22c55e" />
                    <CmdBadge cmd='git commit -m "message"' desc="ìŠ¤ëƒ…ìƒ·ì„ Repositoryì— ì˜êµ¬ ì €ì¥" color="#22c55e" />
                    <Terminal commands={[
                      { cmd: "git init", output: "Initialized empty Git repository in ~/project/.git/" },
                      { cmd: "git add index.html" },
                      { cmd: 'git commit -m "Initial commit"', output: "[main (root-commit) a1b2c3d] Initial commit\n 1 file changed, 10 insertions(+)" },
                      { cmd: "git log --oneline", output: "a1b2c3d (HEAD â†’ main) Initial commit" },
                    ]} />
                    <div style={{ background: "rgba(34,197,94,0.07)", border: "1px solid rgba(34,197,94,0.2)", borderRadius: 9, padding: 14 }}>
                      <div style={{ fontFamily: "DM Mono,monospace", fontSize: 11, color: "#22c55e", marginBottom: 6 }}>ğŸ’¡ ì»¤ë°‹ì˜ íŠ¹ì§•</div>
                      <p style={{ fontSize: 13, color: "var(--text-muted)", lineHeight: 1.7 }}>Gitì€ íŒŒì¼ì˜ ì°¨ì´ì (Delta)ë§Œì´ ì•„ë‹Œ <strong style={{ color: "var(--text)" }}>ì „ì²´ íŒŒì¼ì˜ ìŠ¤ëƒ…ìƒ·</strong>ì„ ì €ì¥í•©ë‹ˆë‹¤. ë°ì´í„° ì••ì¶•ê³¼ ì¤‘ë³µ ì œê±°ë¥¼ í†µí•´ íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬í•©ë‹ˆë‹¤.</p>
                    </div>
                  </div>
                </ModuleCard>
              </div>
            </div>
          )}

          {/* â”€â”€ INTERMEDIATE â”€â”€ */}
          {tab === "intermediate" && (
            <div style={{ animation: "zoomIn .35s ease" }}>
              <Reveal><h2 style={{ fontSize: 30, fontWeight: 800, marginBottom: 6, color: "#f59e0b" }}>ğŸŸ¡ ì¤‘ê¸‰: íŒŒì¼ ê´€ë¦¬ & íˆìŠ¤í† ë¦¬</h2><p style={{ color: "var(--text-muted)", fontSize: 14, marginBottom: 28 }}>íŒŒì¼ ìƒíƒœ ê´€ë¦¬, diff ë¹„êµ, íˆìŠ¤í† ë¦¬ íƒìƒ‰ ê¸°ë²•ì„ ë§ˆìŠ¤í„°í•©ë‹ˆë‹¤.</p></Reveal>
              <div style={{ display: "flex", flexDirection: "column", gap: 14 }}>
                <ModuleCard module="íŒŒì¼ ìƒíƒœ í™•ì¸ (Status & Diff)" index={0} color="yellow" icon="ğŸ”">
                  <div style={{ display: "flex", flexDirection: "column", gap: 12 }}>
                    <div style={{ display: "grid", gridTemplateColumns: "1fr 1fr", gap: 10 }}>
                      {[{ cmd: "git status", s: "ìƒì„¸ ìƒíƒœ í™•ì¸", c: "#f59e0b" }, { cmd: "git status -s", s: "ê°„ê²°í•œ ìƒíƒœ", c: "#f59e0b" }, { cmd: "git diff", s: "Working â†” Staging", c: "#f97316" }, { cmd: "git diff --staged", s: "Staging â†” Commit", c: "#f97316" }].map((item, i) => (
                        <div key={i} style={{ background: "var(--surface2)", border: `1px solid ${item.c}25`, borderRadius: 7, padding: 10 }}>
                          <code style={{ fontFamily: "DM Mono,monospace", fontSize: 11, color: item.c, display: "block", marginBottom: 3 }}>{item.cmd}</code>
                          <span style={{ fontSize: 11, color: "var(--text-muted)" }}>{item.s}</span>
                        </div>
                      ))}
                    </div>
                    <div style={{ display: "flex", gap: 8, flexWrap: "wrap" }}>
                      {[{ code: "M", label: "ìˆ˜ì •ë¨", c: "#f59e0b" }, { code: "A", label: "ì¶”ê°€ë¨", c: "#22c55e" }, { code: "??", label: "Untracked", c: "#ef4444" }, { code: "D", label: "ì‚­ì œë¨", c: "#7c3aed" }].map((s, i) => (
                        <div key={i} style={{ display: "flex", alignItems: "center", gap: 7, background: `${s.c}0d`, border: `1px solid ${s.c}28`, borderRadius: 5, padding: "5px 10px" }}>
                          <span style={{ fontFamily: "DM Mono,monospace", fontSize: 12, color: s.c, fontWeight: 700 }}>{s.code}</span>
                          <span style={{ fontSize: 11, color: "var(--text-muted)" }}>{s.label}</span>
                        </div>
                      ))}
                    </div>
                    <DiffViewer />
                  </div>
                </ModuleCard>
                <ModuleCard module=".gitignore íŒŒì¼ ê´€ë¦¬" index={1} color="yellow" icon="ğŸ™ˆ">
                  <div style={{ display: "flex", flexDirection: "column", gap: 12 }}>
                    <p style={{ fontSize: 13, color: "var(--text-muted)", lineHeight: 1.7 }}>ë¡œê·¸, ë°”ì´ë„ˆë¦¬, ê°œì¸ ì„¤ì • íŒŒì¼ ë“± ë¶ˆí•„ìš”í•œ íŒŒì¼ì„ ëª…ì‹œí•©ë‹ˆë‹¤.</p>
                    <div style={{ background: "#0d1117", borderRadius: 8, padding: 14, fontFamily: "DM Mono,monospace", fontSize: 12, lineHeight: 2 }}>
                      {[["#ì˜ì¡´ì„±", ""], ["node_modules/", "#ef4444"], ["dist/", "#ef4444"], ["*.log", "#ef4444"], [".env", "#ef4444"], [".DS_Store", "#ef4444"]].map(([l, c], i) => (
                        <div key={i} style={{ color: c || "#64748b" }}>{l}</div>
                      ))}
                    </div>
                    <div style={{ background: "rgba(239,68,68,0.07)", border: "1px solid rgba(239,68,68,0.2)", borderRadius: 9, padding: 12, display: "flex", gap: 10 }}>
                      <span style={{ fontSize: 18, flexShrink: 0 }}>âš ï¸</span>
                      <p style={{ fontSize: 13, color: "var(--text-muted)", lineHeight: 1.6 }}>ì´ë¯¸ ì»¤ë°‹ëœ íŒŒì¼ì€ <code style={{ color: "var(--accent)", fontFamily: "DM Mono,monospace" }}>git rm --cached &lt;file&gt;</code>ë¡œ ìºì‹œ ì‚­ì œ í›„ .gitignoreì— ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤.</p>
                    </div>
                  </div>
                </ModuleCard>
                <ModuleCard module="íˆìŠ¤í† ë¦¬ íƒìƒ‰" index={2} color="yellow" icon="ğŸ“œ">
                  <div style={{ display: "flex", flexDirection: "column", gap: 10 }}>
                    <CmdBadge cmd="git log --oneline" desc="ì»¤ë°‹ ë‚´ì—­ í•œ ì¤„ í‘œì‹œ" color="#f59e0b" />
                    <CmdBadge cmd="git log --oneline --graph" desc="ë¸Œëœì¹˜ êµ¬ì¡° ê·¸ë˜í”„ ì‹œê°í™”" color="#f59e0b" />
                    <CmdBadge cmd="git show <commit_id>" desc="íŠ¹ì • ì»¤ë°‹ ë³€ê²½ ë‚´ìš© í™•ì¸" color="#f59e0b" />
                    <CmdBadge cmd="git ls-tree <commit_id>" desc="íŠ¹ì • ì»¤ë°‹ì˜ íŒŒì¼ êµ¬ì¡° í™•ì¸" color="#f59e0b" />
                  </div>
                </ModuleCard>
                <ModuleCard module="ì·¨ì†Œ ë° ë³µêµ¬ (Restore)" index={3} color="yellow" icon="â†©ï¸">
                  <div style={{ display: "flex", flexDirection: "column", gap: 10 }}>
                    {[
                      { cmd: "git restore --staged <file>", d: "Stagingì—ì„œ ë‚´ë¦¬ê¸° (ì»¤ë°‹ ëŒ€ìƒ ì œì™¸)", c: "#f59e0b", icon: "â¬‡ï¸" },
                      { cmd: "git restore <file>", d: "ë¡œì»¬ ë³€ê²½ ì‚¬í•­ íê¸° (ë§ˆì§€ë§‰ ì»¤ë°‹ìœ¼ë¡œ ë˜ëŒë¦¼)", c: "#ef4444", icon: "ğŸ”„" },
                      { cmd: "git clean -fd", d: "ì¶”ì ë˜ì§€ ì•ŠëŠ” íŒŒì¼ ê°•ì œ ì‚­ì œ", c: "#ef4444", icon: "ğŸ—‘ï¸" },
                      { cmd: "git restore --source=HEAD~1 <file>", d: "ì´ì „ ì»¤ë°‹ì—ì„œ íŠ¹ì • íŒŒì¼ ê°€ì ¸ì˜¤ê¸°", c: "#7c3aed", icon: "âª" },
                    ].map((item, i) => (
                      <div key={i} style={{ background: "var(--surface2)", border: `1px solid ${item.c}18`, borderRadius: 9, padding: 12, display: "flex", gap: 10 }}>
                        <span style={{ fontSize: 18, flexShrink: 0 }}>{item.icon}</span>
                        <div><code style={{ fontFamily: "DM Mono,monospace", fontSize: 11, color: item.c, display: "block", marginBottom: 3 }}>{item.cmd}</code><span style={{ fontSize: 12, color: "var(--text-muted)" }}>{item.d}</span></div>
                      </div>
                    ))}
                  </div>
                </ModuleCard>
              </div>
            </div>
          )}

          {/* â”€â”€ ADVANCED â”€â”€ */}
          {tab === "advanced" && (
            <div style={{ animation: "zoomIn .35s ease" }}>
              <Reveal><h2 style={{ fontSize: 30, fontWeight: 800, marginBottom: 6, color: "#ef4444" }}>ğŸ”´ ê³ ê¸‰: ë¸Œëœì¹­ & í˜‘ì—… ì „ëµ</h2><p style={{ color: "var(--text-muted)", fontSize: 14, marginBottom: 28 }}>ë¸Œëœì¹˜ ì „ëµ, ë³‘í•©, ë¦¬ë² ì´ìŠ¤, í˜‘ì—… ì›Œí¬í”Œë¡œìš°ë¥¼ ì™„ì „íˆ ì´í•´í•©ë‹ˆë‹¤.</p></Reveal>
              <div style={{ display: "flex", flexDirection: "column", gap: 14 }}>
                <ModuleCard module="ë¸Œëœì¹˜ (Branch)" index={0} color="red" icon="ğŸŒ¿">
                  <div style={{ display: "flex", flexDirection: "column", gap: 12 }}>
                    <div style={{ background: "rgba(0,0,0,.3)", borderRadius: 9, padding: 14, fontFamily: "DM Mono,monospace", fontSize: 12, lineHeight: 2.2 }}>
                      <div><span style={{ color: "#22c55e" }}>â—â”€â”€â—â”€â”€â—â”€â”€â—</span>  <span style={{ color: "#22c55e", opacity: .6 }}>main</span></div>
                      <div><span style={{ color: "#64748b" }}>       \â”€â”€</span><span style={{ color: "#00d4ff" }}>â—â”€â”€â—â”€â”€/</span>  <span style={{ color: "#00d4ff", opacity: .6 }}>feature/login</span></div>
                    </div>
                    <CmdBadge cmd="git branch" desc="ë¸Œëœì¹˜ ëª©ë¡ í™•ì¸" color="#ef4444" />
                    <CmdBadge cmd="git switch -c <name>" desc="ë¸Œëœì¹˜ ìƒì„± í›„ ì „í™˜ (ê¶Œì¥)" color="#ef4444" />
                    <CmdBadge cmd="git branch -d <name>" desc="ë¸Œëœì¹˜ ì‚­ì œ" color="#ef4444" />
                  </div>
                </ModuleCard>
                <ModuleCard module="Merge vs Rebase" index={1} color="red" icon="ğŸ”€">
                  <div style={{ display: "grid", gridTemplateColumns: "1fr 1fr", gap: 12 }}>
                    {[
                      { t: "Merge", d: "ë‘ ë¸Œëœì¹˜ì˜ ë³€ê²½ì‚¬í•­ì„ í•©ì¹˜ë©° íˆìŠ¤í† ë¦¬ë¥¼ ë³´ì¡´í•©ë‹ˆë‹¤.", pros: "íˆìŠ¤í† ë¦¬ ë³´ì¡´, ì•ˆì „", cons: "ë³µì¡í•œ íˆìŠ¤í† ë¦¬", cmd: "git merge <branch>", c: "#22c55e" },
                      { t: "Rebase", d: "ì»¤ë°‹ì„ ë‹¤ë¥¸ ë¸Œëœì¹˜ ìœ„ì— ì¬ì ìš©í•˜ì—¬ ì„ í˜• íˆìŠ¤í† ë¦¬ë¥¼ ë§Œë“­ë‹ˆë‹¤.", pros: "ê¹”ë”í•œ ì„ í˜• íˆìŠ¤í† ë¦¬", cons: "ê³µìœ  ë¸Œëœì¹˜ ì‚¬ìš© ê¸ˆì§€", cmd: "git rebase <branch>", c: "#7c3aed" },
                    ].map((item, i) => (
                      <div key={i} style={{ background: `${item.c}08`, border: `1px solid ${item.c}28`, borderRadius: 11, padding: 14 }}>
                        <div style={{ fontFamily: "Syne,sans-serif", fontWeight: 700, color: item.c, marginBottom: 6, fontSize: 15 }}>{item.t}</div>
                        <p style={{ fontSize: 12, color: "var(--text-muted)", lineHeight: 1.6, marginBottom: 10 }}>{item.d}</p>
                        <div style={{ fontSize: 11, color: "#22c55e", marginBottom: 3 }}>âœ“ {item.pros}</div>
                        <div style={{ fontSize: 11, color: "#ef4444", marginBottom: 10 }}>âœ— {item.cons}</div>
                        <code style={{ fontFamily: "DM Mono,monospace", fontSize: 10, color: item.c, background: `${item.c}14`, padding: "3px 8px", borderRadius: 4 }}>{item.cmd}</code>
                      </div>
                    ))}
                  </div>
                  <div style={{ marginTop: 12, background: "rgba(124,58,237,0.08)", border: "1px solid rgba(124,58,237,0.22)", borderRadius: 9, padding: 12 }}>
                    <div style={{ fontFamily: "DM Mono,monospace", fontSize: 11, color: "#7c3aed", marginBottom: 5 }}>âš¡ Golden Rule</div>
                    <p style={{ fontSize: 13, color: "var(--text-muted)", lineHeight: 1.7 }}><strong style={{ color: "var(--text)" }}>ê³µìœ ëœ ë¸Œëœì¹˜ì—ëŠ” ì ˆëŒ€ rebaseë¥¼ ì‚¬ìš©í•˜ì§€ ë§ˆì„¸ìš”.</strong> ë¡œì»¬ ë¸Œëœì¹˜ ì •ë¦¬ ì‹œì—ë§Œ ì‚¬ìš©í•˜ì„¸ìš”.</p>
                  </div>
                </ModuleCard>
                <ModuleCard module="ì›ê²© ì €ì¥ì†Œ (Remote)" index={2} color="red" icon="â˜ï¸">
                  <div style={{ display: "flex", flexDirection: "column", gap: 10 }}>
                    <CmdBadge cmd="git remote add origin <url>" desc="ì›ê²© ì €ì¥ì†Œ ì—°ê²°" color="#f97316" />
                    <CmdBadge cmd="git push -u origin main" desc="ì²˜ìŒ push ì‹œ ì—…ìŠ¤íŠ¸ë¦¼ ì„¤ì •" color="#f97316" />
                    <CmdBadge cmd="git fetch" desc="ì›ê²© ë³€ê²½ì‚¬í•­ ê°€ì ¸ì˜¤ê¸° (ë³‘í•© ì•ˆ í•¨)" color="#f97316" />
                    <CmdBadge cmd="git pull" desc="fetch + merge ë™ì‹œ ì‹¤í–‰" color="#f97316" />
                    <CmdBadge cmd="git clone <url>" desc="ì›ê²© ì €ì¥ì†Œ ë³µì œ" color="#f97316" />
                  </div>
                </ModuleCard>
                <ModuleCard module="íˆìŠ¤í† ë¦¬ ìˆ˜ì • (Reset & Revert)" index={3} color="red" icon="âš ï¸">
                  <div style={{ display: "flex", flexDirection: "column", gap: 10 }}>
                    {[
                      { cmd: "git reset --soft HEAD~1", d: "ì»¤ë°‹ ì·¨ì†Œ (ë³€ê²½ì‚¬í•­ Staging ìœ ì§€)", c: "#f59e0b", r: "ë‚®ìŒ" },
                      { cmd: "git reset --mixed HEAD~1", d: "ì»¤ë°‹ ì·¨ì†Œ + ì–¸ìŠ¤í…Œì´ì§• (Working ìœ ì§€)", c: "#f97316", r: "ë³´í†µ" },
                      { cmd: "git reset --hard HEAD~1", d: "ì»¤ë°‹ ì™„ì „ ì‚­ì œ (ë³µêµ¬ ë¶ˆê°€!)", c: "#ef4444", r: "ë†’ìŒ" },
                      { cmd: "git revert <commit>", d: "íŠ¹ì • ì»¤ë°‹ì„ ì·¨ì†Œí•˜ëŠ” ìƒˆ ì»¤ë°‹ ìƒì„± (ì•ˆì „)", c: "#22c55e", r: "ì•ˆì „" },
                    ].map((item, i) => (
                      <div key={i} style={{ background: "var(--surface2)", border: `1px solid ${item.c}18`, borderRadius: 9, padding: 12, display: "flex", alignItems: "center", gap: 12 }}>
                        <div style={{ flex: 1 }}><code style={{ fontFamily: "DM Mono,monospace", fontSize: 11, color: item.c, display: "block", marginBottom: 3 }}>{item.cmd}</code><span style={{ fontSize: 12, color: "var(--text-muted)" }}>{item.d}</span></div>
                        <div style={{ padding: "3px 9px", borderRadius: 5, fontSize: 10, fontFamily: "DM Mono,monospace", background: `${item.c}14`, color: item.c, border: `1px solid ${item.c}28`, flexShrink: 0 }}>ìœ„í—˜ë„: {item.r}</div>
                      </div>
                    ))}
                  </div>
                </ModuleCard>
              </div>
            </div>
          )}

          {/* â”€â”€ SIMULATIONS â”€â”€ */}
          {tab === "simulations" && (
            <div style={{ animation: "zoomIn .35s ease" }}>
              <Reveal>
                <h2 style={{ fontSize: 30, fontWeight: 800, marginBottom: 6, color: "var(--accent)" }}>âš¡ ì¸í„°ë™í‹°ë¸Œ ì‹œë®¬ë ˆì´ì…˜</h2>
                <p style={{ color: "var(--text-muted)", fontSize: 14, marginBottom: 24 }}>ì§ì ‘ ì¡°ì‘í•˜ë©° Gitì˜ í•µì‹¬ ê°œë…ì„ ì²´ë“í•˜ì„¸ìš”.</p>
              </Reveal>

              {/* Sim sub-tabs */}
              <div style={{ display: "flex", gap: 6, flexWrap: "wrap", marginBottom: 28 }}>
                {simTabs.map(t => (
                  <button key={t.id} onClick={() => setSimTab(t.id)} style={{ padding: "8px 16px", background: simTab === t.id ? `${t.color}18` : "var(--surface)", border: `1px solid ${simTab === t.id ? t.color + "50" : "var(--border)"}`, borderRadius: 8, color: simTab === t.id ? t.color : "var(--text-muted)", fontFamily: "DM Mono,monospace", fontSize: 12, cursor: "pointer", transition: "all .3s cubic-bezier(.34,1.56,.64,1)", boxShadow: simTab === t.id ? `0 0 14px ${t.color}20` : "none" }}>
                    {t.label}
                  </button>
                ))}
              </div>

              {simTab === "branch" && (
                <div style={{ animation: "zoomIn .3s ease" }}>
                  <Reveal>
                    <div style={{ marginBottom: 16, padding: "14px 18px", background: "rgba(0,212,255,0.06)", border: "1px solid rgba(0,212,255,0.18)", borderRadius: 12 }}>
                      <div style={{ fontFamily: "Syne,sans-serif", fontWeight: 700, color: "var(--accent)", marginBottom: 4 }}>ğŸŒ¿ Branch & Merge ì‹œë®¬ë ˆì´í„°</div>
                      <p style={{ fontSize: 13, color: "var(--text-muted)", lineHeight: 1.6 }}>feature/login ë¸Œëœì¹˜ë¥¼ ë§Œë“¤ê³  ì»¤ë°‹í•œ ë’¤, main ë¸Œëœì¹˜ì— ë³‘í•©í•˜ëŠ” ì „ì²´ íë¦„ì„ ë‹¨ê³„ë³„ë¡œ ì‹¤í–‰í•´ë³´ì„¸ìš”. ì™¼ìª½ ê·¸ë˜í”„ê°€ ì‹¤ì‹œê°„ìœ¼ë¡œ ë³€í•©ë‹ˆë‹¤.</p>
                    </div>
                  </Reveal>
                  <BranchMergeSim />
                </div>
              )}

              {simTab === "conflict" && (
                <div style={{ animation: "zoomIn .3s ease" }}>
                  <Reveal>
                    <div style={{ marginBottom: 16, padding: "14px 18px", background: "rgba(239,68,68,0.06)", border: "1px solid rgba(239,68,68,0.2)", borderRadius: 12 }}>
                      <div style={{ fontFamily: "Syne,sans-serif", fontWeight: 700, color: "#ef4444", marginBottom: 4 }}>âš”ï¸ Merge Conflict í•´ê²° ì‹œë®¬ë ˆì´í„°</div>
                      <p style={{ fontSize: 13, color: "var(--text-muted)", lineHeight: 1.6 }}>ë‘ ë¸Œëœì¹˜ê°€ ë™ì¼í•œ íŒŒì¼ì„ ìˆ˜ì •í–ˆì„ ë•Œ ë°œìƒí•˜ëŠ” ì¶©ëŒì„ ì§ì ‘ í•´ê²°í•´ë³´ì„¸ìš”. ê° ì„¹ì…˜ë§ˆë‹¤ "í˜„ì¬ ë¸Œëœì¹˜" ë˜ëŠ” "ë³‘í•© ë¸Œëœì¹˜" ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒí•˜ì—¬ ì¶©ëŒì„ í•´ì†Œí•©ë‹ˆë‹¤.</p>
                    </div>
                  </Reveal>
                  <ConflictSim />
                </div>
              )}

              {simTab === "reset" && (
                <div style={{ animation: "zoomIn .3s ease" }}>
                  <Reveal>
                    <div style={{ marginBottom: 16, padding: "14px 18px", background: "rgba(249,115,22,0.06)", border: "1px solid rgba(249,115,22,0.2)", borderRadius: 12 }}>
                      <div style={{ fontFamily: "Syne,sans-serif", fontWeight: 700, color: "#f97316", marginBottom: 4 }}>âª Git Reset ë‹¨ê³„ë³„ ì‹œë®¬ë ˆì´í„°</div>
                      <p style={{ fontSize: 13, color: "var(--text-muted)", lineHeight: 1.6 }}>--soft, --mixed, --hard ì„¸ ê°€ì§€ ëª¨ë“œì˜ ì°¨ì´ë¥¼ ì§ì ‘ í™•ì¸í•˜ì„¸ìš”. ê° ëª¨ë“œë¥¼ ì„ íƒí•˜ê³  ì‹¤í–‰í•˜ë©´ ì»¤ë°‹ íˆìŠ¤í† ë¦¬ì™€ íŒŒì¼ ìƒíƒœê°€ ì–´ë–»ê²Œ ë³€í•˜ëŠ”ì§€ ì‹œê°ì ìœ¼ë¡œ ë³´ì—¬ì¤ë‹ˆë‹¤.</p>
                    </div>
                  </Reveal>
                  <ResetSim />
                </div>
              )}

              {simTab === "pr" && (
                <div style={{ animation: "zoomIn .3s ease" }}>
                  <Reveal>
                    <div style={{ marginBottom: 16, padding: "14px 18px", background: "rgba(34,197,94,0.06)", border: "1px solid rgba(34,197,94,0.2)", borderRadius: 12 }}>
                      <div style={{ fontFamily: "Syne,sans-serif", fontWeight: 700, color: "#22c55e", marginBottom: 4 }}>ğŸ‘¥ íŒ€ í˜‘ì—… PR ì›Œí¬í”Œë¡œìš° ì‹œë®¬ë ˆì´í„°</div>
                      <p style={{ fontSize: 13, color: "var(--text-muted)", lineHeight: 1.6 }}>ì‹¤ì œ íŒ€ í™˜ê²½ì—ì„œ feature ë¸Œëœì¹˜ ìƒì„±ë¶€í„° PR ìƒì„±, ì½”ë“œ ë¦¬ë·°, í”¼ë“œë°± ë°˜ì˜, Merge, ìë™ ë°°í¬ê¹Œì§€ì˜ ì „ì²´ í˜‘ì—… íë¦„ì„ ì²´í—˜í•´ë³´ì„¸ìš”.</p>
                    </div>
                  </Reveal>
                  <PRWorkflowSim />
                </div>
              )}
            </div>
          )}

          {/* Progress â€” real tracking */}
          <Reveal delay={0.2} style={{ marginTop: 56 }}>
            <div style={{ background: "var(--surface)", border: "1px solid var(--border)", borderRadius: 14, padding: 26 }}>
              <h3 style={{ fontFamily: "Syne,sans-serif", fontSize: 18, fontWeight: 700, marginBottom: 20 }}>ğŸ“Š í•™ìŠµ ì§„í–‰ í˜„í™©</h3>
              <div style={{ display: "grid", gridTemplateColumns: "1fr 1fr", gap: 12 }}>
                {/* Tab progress */}
                <div>
                  <div style={{ fontSize: 10, color: "var(--text-muted)", fontFamily: "DM Mono,monospace", letterSpacing: 1, marginBottom: 10 }}>ê°•ì˜ íƒ­ ({visitedTabs.size}/4 ì™„ë£Œ)</div>
                  {tabs.map(t => {
                    const done = visitedTabs.has(t.id);
                    return (
                      <div key={t.id} onClick={() => setTab(t.id)} style={{ display: "flex", alignItems: "center", gap: 8, padding: "8px 12px", marginBottom: 4, borderRadius: 8, cursor: "pointer",
                        background: done ? `${t.color}0c` : "transparent", border: `1px solid ${done ? t.color + "30" : "var(--border)"}`, transition: "all .3s" }}>
                        <span style={{ width: 18, height: 18, borderRadius: "50%", display: "flex", alignItems: "center", justifyContent: "center", fontSize: 10,
                          background: done ? `${t.color}20` : "var(--surface2)", color: done ? t.color : "var(--text-muted)", border: `1px solid ${done ? t.color : "var(--border)"}`, transition: "all .3s" }}>
                          {done ? "âœ“" : ""}
                        </span>
                        <span style={{ fontSize: 12, color: done ? t.color : "var(--text-muted)", fontFamily: "Syne,sans-serif", fontWeight: done ? 600 : 400, transition: "all .3s" }}>{t.label}</span>
                      </div>
                    );
                  })}
                </div>
                {/* Simulation progress */}
                <div>
                  <div style={{ fontSize: 10, color: "var(--text-muted)", fontFamily: "DM Mono,monospace", letterSpacing: 1, marginBottom: 10 }}>ì‹œë®¬ë ˆì´ì…˜ ({visitedSims.size}/4 ì²´í—˜)</div>
                  {simTabs.map(t => {
                    const done = visitedSims.has(t.id);
                    return (
                      <div key={t.id} onClick={() => { setTab("simulations"); setSimTab(t.id); }} style={{ display: "flex", alignItems: "center", gap: 8, padding: "8px 12px", marginBottom: 4, borderRadius: 8, cursor: "pointer",
                        background: done ? `${t.color}0c` : "transparent", border: `1px solid ${done ? t.color + "30" : "var(--border)"}`, transition: "all .3s" }}>
                        <span style={{ width: 18, height: 18, borderRadius: "50%", display: "flex", alignItems: "center", justifyContent: "center", fontSize: 10,
                          background: done ? `${t.color}20` : "var(--surface2)", color: done ? t.color : "var(--text-muted)", border: `1px solid ${done ? t.color : "var(--border)"}`, transition: "all .3s" }}>
                          {done ? "âœ“" : ""}
                        </span>
                        <span style={{ fontSize: 12, color: done ? t.color : "var(--text-muted)", fontFamily: "Syne,sans-serif", fontWeight: done ? 600 : 400, transition: "all .3s" }}>{t.label}</span>
                      </div>
                    );
                  })}
                </div>
              </div>
              {/* Overall progress bar */}
              <div style={{ marginTop: 16 }}>
                <div style={{ display: "flex", justifyContent: "space-between", marginBottom: 6 }}>
                  <span style={{ fontSize: 11, color: "var(--text-muted)", fontFamily: "DM Mono,monospace" }}>ì „ì²´ ì§„í–‰ë¥ </span>
                  <span style={{ fontSize: 11, color: "var(--accent)", fontFamily: "DM Mono,monospace" }}>{Math.round(((visitedTabs.size + visitedSims.size) / 8) * 100)}%</span>
                </div>
                <div style={{ background: "var(--surface2)", borderRadius: 4, height: 6, overflow: "hidden" }}>
                  <div style={{ height: "100%", borderRadius: 4, background: "linear-gradient(90deg,#00d4ff,#7c3aed)", width: `${((visitedTabs.size + visitedSims.size) / 8) * 100}%`, transition: "width .8s cubic-bezier(.34,1,.64,1)", boxShadow: "0 0 8px rgba(0,212,255,0.5)" }} />
                </div>
              </div>
            </div>
          </Reveal>

          {/* Quick Ref */}
          <Reveal delay={0.3} style={{ marginTop: 20 }}>
            <div style={{ background: "linear-gradient(135deg,rgba(0,212,255,0.04),rgba(124,58,237,0.04))", border: "1px solid rgba(0,212,255,0.13)", borderRadius: 14, padding: 26 }}>
              <h3 style={{ fontFamily: "Syne,sans-serif", fontSize: 18, fontWeight: 700, marginBottom: 18, color: "var(--accent)" }}>âš¡ ì¹˜íŠ¸ì‹œíŠ¸</h3>
              <div style={{ display: "grid", gridTemplateColumns: "repeat(auto-fill,minmax(260px,1fr))", gap: 8 }}>
                {[
                  { cmd: "git init", d: "ì €ì¥ì†Œ ì´ˆê¸°í™”", cat: "ê¸°ì´ˆ", c: "#22c55e" },
                  { cmd: "git add .", d: "ì „ì²´ ìŠ¤í…Œì´ì§•", cat: "ê¸°ì´ˆ", c: "#22c55e" },
                  { cmd: "git commit -m 'msg'", d: "ì»¤ë°‹", cat: "ê¸°ì´ˆ", c: "#22c55e" },
                  { cmd: "git status -s", d: "ê°„ë‹¨ ìƒíƒœ í™•ì¸", cat: "ê¸°ì´ˆ", c: "#22c55e" },
                  { cmd: "git log --oneline", d: "ì»¤ë°‹ íˆìŠ¤í† ë¦¬", cat: "ì¤‘ê¸‰", c: "#f59e0b" },
                  { cmd: "git diff --staged", d: "ìŠ¤í…Œì´ì§• ë³€ê²½ ë¹„êµ", cat: "ì¤‘ê¸‰", c: "#f59e0b" },
                  { cmd: "git restore --staged <f>", d: "ì–¸ìŠ¤í…Œì´ì§•", cat: "ì¤‘ê¸‰", c: "#f59e0b" },
                  { cmd: "git restore <file>", d: "ë³€ê²½ì‚¬í•­ íê¸°", cat: "ì¤‘ê¸‰", c: "#f59e0b" },
                  { cmd: "git switch -c <name>", d: "ë¸Œëœì¹˜ ìƒì„± & ì „í™˜", cat: "ê³ ê¸‰", c: "#ef4444" },
                  { cmd: "git merge <branch>", d: "ë¸Œëœì¹˜ ë³‘í•©", cat: "ê³ ê¸‰", c: "#ef4444" },
                  { cmd: "git rebase -i HEAD~3", d: "ëŒ€í™”í˜• ë¦¬ë² ì´ìŠ¤", cat: "ê³ ê¸‰", c: "#ef4444" },
                  { cmd: "git cherry-pick <hash>", d: "íŠ¹ì • ì»¤ë°‹ë§Œ ì ìš©", cat: "ê³ ê¸‰", c: "#ef4444" },
                ].map((item, i) => (
                  <div key={i} style={{ background: "var(--surface2)", borderRadius: 7, padding: "9px 12px", display: "flex", gap: 8, alignItems: "center", animation: `staggerReveal .3s ease ${i * .03}s both` }}>
                    <code style={{ fontFamily: "DM Mono,monospace", fontSize: 11, color: "var(--accent)", flex: 1 }}>{item.cmd}</code>
                    <span style={{ fontSize: 9, padding: "2px 6px", borderRadius: 3, background: `${item.c}14`, color: item.c, fontFamily: "DM Mono,monospace", flexShrink: 0, border: `1px solid ${item.c}28` }}>{item.cat}</span>
                  </div>
                ))}
              </div>
            </div>
          </Reveal>
        </div>

        {/* Footer */}
        <div style={{ textAlign: "center", padding: "36px 24px", borderTop: "1px solid var(--border)", fontFamily: "DM Mono,monospace", fontSize: 12, color: "var(--text-muted)" }}>
          <div style={{ animation: "glow 3s ease-in-out infinite", color: "var(--accent)", fontSize: 13, marginBottom: 6 }}>git commit -m "Keep learning, keep growing"</div>
          <div>Â© Git Mastery Course Â· Built with React</div>
        </div>
      </div>
    </div>
  );
}

ReactDOM.createRoot(document.getElementById('root')).render(React.createElement(GitLecture));
</script>
</body>
</html>
